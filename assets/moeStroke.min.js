(function () {var O="function"==typeof Object.defineProperties?Object.defineProperty:function(b,d,t){if(b==Array.prototype||b==Object.prototype)return b;b[d]=t.value;return b};function aa(b){b=["object"==typeof globalThis&&globalThis,b,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var d=0;d<b.length;++d){var t=b[d];if(t&&t.Math==Math)return t}throw Error("Cannot find global object");}var P=aa(this);
function Q(b,d){if(d)a:{var t=P;b=b.split(".");for(var w=0;w<b.length-1;w++){var x=b[w];if(!(x in t))break a;t=t[x]}b=b[b.length-1];w=t[b];d=d(w);d!=w&&null!=d&&O(t,b,{configurable:!0,writable:!0,value:d})}}function ba(b){var d=0;return function(){return d<b.length?{done:!1,value:b[d++]}:{done:!0}}}function ca(b){var d="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return d?d.call(b):{next:ba(b)}}
function R(){this.o=!1;this.g=null;this.m=void 0;this.b=1;this.K=this.C=0;this.i=null}function T(b){if(b.o)throw new TypeError("Generator is already running");b.o=!0}R.prototype.s=function(b){this.m=b};R.prototype.A=function(b){this.i={R:b,U:!0};this.b=this.C||this.K};R.prototype.return=function(b){this.i={return:b};this.b=this.K};function X(b,d,t){b.b=t;return{value:d}}function da(b){this.a=new R;this.V=b}
da.prototype.s=function(b){T(this.a);if(this.a.g)return ea(this,this.a.g.next,b,this.a.s);this.a.s(b);return Y(this)};function fa(b,d){T(b.a);var t=b.a.g;if(t)return ea(b,"return"in t?t["return"]:function(w){return{value:w,done:!0}},d,b.a.return);b.a.return(d);return Y(b)}da.prototype.A=function(b){T(this.a);if(this.a.g)return ea(this,this.a.g["throw"],b,this.a.s);this.a.A(b);return Y(this)};
function ea(b,d,t,w){try{var x=d.call(b.a.g,t);if(!(x instanceof Object))throw new TypeError("Iterator result "+x+" is not an object");if(!x.done)return b.a.o=!1,x;var F=x.value}catch(f){return b.a.g=null,b.a.A(f),Y(b)}b.a.g=null;w.call(b.a,F);return Y(b)}function Y(b){for(;b.a.b;)try{var d=b.V(b.a);if(d)return b.a.o=!1,{value:d.value,done:!1}}catch(t){b.a.m=void 0,b.a.A(t)}b.a.o=!1;if(b.a.i){d=b.a.i;b.a.i=null;if(d.U)throw d.R;return{value:d.return,done:!0}}return{value:void 0,done:!0}}
function ha(b){this.next=function(d){return b.s(d)};this.throw=function(d){return b.A(d)};this.return=function(d){return fa(b,d)};this[Symbol.iterator]=function(){return this}}function ia(b){function d(w){return b.next(w)}function t(w){return b.throw(w)}return new Promise(function(w,x){function F(f){f.done?w(f.value):Promise.resolve(f.value).then(d,t).then(F,x)}F(b.next())})}function Z(b){return ia(new ha(new da(b)))}
Q("Symbol",function(b){function d(x){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new t("jscomp_symbol_"+(x||"")+"_"+w++,x)}function t(x,F){this.O=x;O(this,"description",{configurable:!0,writable:!0,value:F})}if(b)return b;t.prototype.toString=function(){return this.O};var w=0;return d});
Q("Symbol.iterator",function(b){if(b)return b;b=Symbol("Symbol.iterator");for(var d="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),t=0;t<d.length;t++){var w=P[d[t]];"function"===typeof w&&"function"!=typeof w.prototype[b]&&O(w.prototype,b,{configurable:!0,writable:!0,value:function(){return ja(ba(this))}})}return b});function ja(b){b={next:b};b[Symbol.iterator]=function(){return this};return b}
Q("Promise",function(b){function d(f){this.u=0;this.G=void 0;this.j=[];var u=this.D();try{f(u.resolve,u.reject)}catch(z){u.reject(z)}}function t(){this.f=null}function w(f){return f instanceof d?f:new d(function(u){u(f)})}if(b)return b;t.prototype.I=function(f){if(null==this.f){this.f=[];var u=this;this.J(function(){u.S()})}this.f.push(f)};var x=P.setTimeout;t.prototype.J=function(f){x(f,0)};t.prototype.S=function(){for(;this.f&&this.f.length;){var f=this.f;this.f=[];for(var u=0;u<f.length;++u){var z=
f[u];f[u]=null;try{z()}catch(D){this.P(D)}}}this.f=null};t.prototype.P=function(f){this.J(function(){throw f;})};d.prototype.D=function(){function f(D){return function(G){z||(z=!0,D.call(u,G))}}var u=this,z=!1;return{resolve:f(this.X),reject:f(this.F)}};d.prototype.X=function(f){if(f===this)this.F(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof d)this.Y(f);else{a:switch(typeof f){case "object":var u=null!=f;break a;case "function":u=!0;break a;default:u=!1}u?this.W(f):this.L(f)}};
d.prototype.W=function(f){var u=void 0;try{u=f.then}catch(z){this.F(z);return}"function"==typeof u?this.Z(u,f):this.L(f)};d.prototype.F=function(f){this.M(2,f)};d.prototype.L=function(f){this.M(1,f)};d.prototype.M=function(f,u){if(0!=this.u)throw Error("Cannot settle("+f+", "+u+"): Promise already settled in state"+this.u);this.u=f;this.G=u;this.T()};d.prototype.T=function(){if(null!=this.j){for(var f=0;f<this.j.length;++f)F.I(this.j[f]);this.j=null}};var F=new t;d.prototype.Y=function(f){var u=this.D();
f.B(u.resolve,u.reject)};d.prototype.Z=function(f,u){var z=this.D();try{f.call(u,z.resolve,z.reject)}catch(D){z.reject(D)}};d.prototype.then=function(f,u){function z(I,K){return"function"==typeof I?function(L){try{D(I(L))}catch(M){G(M)}}:K}var D,G,S=new d(function(I,K){D=I;G=K});this.B(z(f,D),z(u,G));return S};d.prototype.catch=function(f){return this.then(void 0,f)};d.prototype.B=function(f,u){function z(){switch(D.u){case 1:f(D.G);break;case 2:u(D.G);break;default:throw Error("Unexpected state: "+
D.u);}}var D=this;null==this.j?F.I(z):this.j.push(z)};d.resolve=w;d.reject=function(f){return new d(function(u,z){z(f)})};d.race=function(f){return new d(function(u,z){for(var D=ca(f),G=D.next();!G.done;G=D.next())w(G.value).B(u,z)})};d.all=function(f){var u=ca(f),z=u.next();return z.done?w([]):new d(function(D,G){function S(L){return function(M){I[L]=M;K--;0==K&&D(I)}}var I=[],K=0;do I.push(void 0),K++,w(z.value).B(S(I.length-1),G),z=u.next();while(!z.done)})};return d});
Q("String.prototype.codePointAt",function(b){return b?b:function(d){if(null==this)throw new TypeError("The 'this' value for String.prototype.codePointAt must not be null or undefined");var t=this+"";var w=t.length;d=Number(d)||0;if(0<=d&&d<w){d|=0;var x=t.charCodeAt(d);if(55296>x||56319<x||d+1===w)return x;d=t.charCodeAt(d+1);return 56320>d||57343<d?x:1024*(x-55296)+d+9216}}});
Q("Array.from",function(b){return b?b:function(d,t,w){t=null!=t?t:function(u){return u};var x=[],F="undefined"!=typeof Symbol&&Symbol.iterator&&d[Symbol.iterator];if("function"==typeof F){d=F.call(d);for(var f=0;!(F=d.next()).done;)x.push(t.call(w,F.value,f++))}else for(F=d.length,f=0;f<F;f++)x.push(t.call(w,d[f],f));return x}});
(function(b){function d(a,k){var c=document.createElement("script");c.setAttribute("type","text/javascript");c.setAttribute("charset","utf-8");c.setAttribute("src",a);c.onload=c.onreadystatechange=function(){c.readyState&&"loaded"!==c.readyState&&"complete"!==c.readyState||(c.onload=c.onreadystatechange=null,document.getElementsByTagName("head")[0].removeChild(c),k())};c.onerror=function(){c.onerror=null;document.getElementsByTagName("head")[0].removeChild(c);"function"==typeof k&&k()};a=document.getElementsByTagName("head")[0];
a.insertBefore(c,a.firstChild)}function t(a,k){var c=[];if("number"!=typeof k||0>k)k=0;if("string"==typeof a&&""!=a.replace(/\s/g,"")){a=a.split("~");if("undefined"!=typeof a&&null!=a){var e=0;do""==a[e]?a.splice(e,1):e++;while(e<a.length)}if(k<a.length&&(a=a[k],a=a.replace(/[^0-9\-,;]/g,""),""!=a))for(k=a.split(";"),a=0;a<k.length;a++){e=k[a].split(",");for(var g=0;g<e.length;g++)if(0<e[g].length){"undefined"==typeof c[a]&&(c[a]=[]);var l=e[g].match(/(\d+)-(\d+)/);if(null!=l&&3<=l.length){var p=
parseInt(l[1],10);l=parseInt(l[2],10);if(p>l){var h=l;l=p;p=h}for(;p<=l;p++)c[a].push(p)}else p=parseInt(e[g],10),isNaN(p)||c[a].push(p)}}}return c}function w(a){if(window.ActiveXObject){var k=new ActiveXObject("Microsoft.XMLDOM");k.async="false";k.loadXML(a)}else k=(new DOMParser).parseFromString(a,"text/xml");return k}function x(a,k){for(var c=[],e=[],g=0,l=a.getElementsByTagName("Stroke"),p=0;p<l.length;p++)if(1==l[p].nodeType){c[g]=[];e[g]=[];for(var h=l[p].childNodes,r=0,m=0,n=0;n<h.length;n++)if(1==
h[n].nodeType)if("Outline"==h[n].nodeName)for(var v=h[n].childNodes,q=0;q<v.length;q++)1==v[q].nodeType&&(c[g][r]=v[q],r++);else if("Track"==h[n].nodeName)for(e[g][m]=[],v=h[n].childNodes,q=0;q<v.length;q++)1==v[q].nodeType&&(e[g][m]=v[q],m++);g++}g=a.getElementsByTagName("Word")[0].getAttribute("unicode");"string"==typeof g&&c&&e&&("\u61c2"==g&&32==c.length&&32==e.length?(c.splice(16),e.splice(16),console.log("\u522a\u9664-\u61c2-16\u756b\u5f8c\u591a\u51fa\u768416\u7b46\u8cc7\u6599")):"\u8d10"==
g?(l=c[11].splice(0),c[11]=c[12].splice(0),c[12]=l,l=e[11].splice(0),e[11]=e[12].splice(0),e[12]=l,console.log("\u4ea4\u63db-\u8d10-\u768412, 13 \u756b")):"\u69bb"==g&&15==c.length&&15==e.length?(c.splice(14,1),e.splice(14,1),console.log("\u522a\u9664-\u69bb-\u591a\u51fa\u7684\u7b2c15\u7b46\u8cc7\u6599")):"\u779e"==g&&17==c.length&&17==e.length?(c.splice(16,1),e.splice(16,1),console.log("\u522a\u9664-\u779e-\u591a\u51fa\u7684\u7b2c17\u7b46\u8cc7\u6599")):"\u6170"==g&&18==c.length&&18==e.length?(c.splice(15),
e.splice(15),console.log("\u522a\u9664-\u6170-15\u756b\u5f8c\u591a\u51fa\u76843\u7b46\u8cc7\u6599")):"\u53eb"==g&&e[4]&&3==e[4].length?(l=e[4][1],e[4][1]=e[4][2],e[4][2]=l,console.log("\u4ea4\u63db-\u53eb-5\u756b\u7684\u6b65\u9a5f2, 3")):"\u554a"==g&&e[8]&&5==e[8].length&&(l=e[8][3],e[8][3]=e[8][4],e[8][4]=l,console.log("\u4ea4\u63db-\u554a-9\u756b\u7684\u6b65\u9a5f4, 5")));l={};l.$=g||k;l.N=c;l.h=e;l.H=a.getElementsByTagName("Word")[0].getAttribute("sound");l.l=a.getElementsByTagName("Word")[0].getAttribute("parts");
return l}function F(a,k,c,e){var g="";if("undefined"==typeof a||null==a)return g;"number"!=typeof c&&(c=0);"number"!=typeof e&&(e=0);"number"==typeof k&&(k=[k]);for(var l=0;l<k.length;l++){for(var p=a[k[l]-1],h=0;h<p.length;h++){var r=p[h];switch(r.nodeName){case "MoveTo":var m=Number(r.getAttribute("x"))+c;var n=Number(r.getAttribute("y"))+e;g+=" M"+m+" "+n;break;case "LineTo":m=Number(r.getAttribute("x"))+c;n=Number(r.getAttribute("y"))+e;g+=" L"+m+" "+n;break;case "QuadTo":m=Number(r.getAttribute("x1"))+
c;n=Number(r.getAttribute("y1"))+e;var v=Number(r.getAttribute("x2"))+c;var q=Number(r.getAttribute("y2"))+e;g+=" Q"+m+" "+n+" "+v+" "+q;break;case "CubicTo":m=Number(r.getAttribute("x1"))+c;n=Number(r.getAttribute("y1"))+e;v=Number(r.getAttribute("x2"))+c;q=Number(r.getAttribute("y2"))+e;var C=Number(r.getAttribute("x3"))+c;r=Number(r.getAttribute("y3"))+e;g+=" C"+m+" "+n+" "+v+" "+q+" "+C+" "+r}}g+=" Z"}return g=g.trim()}function f(a,k){var c,e,g,l;return Z(function(p){c=null;e=0;"string"!=typeof a||
""==a.replace(/\s/g,"")||"string"!=typeof k||""==k.replace(/\s/g,"")?e=31:(a=a.trim(),k=k.trim(),1<a.length&&(a=a.substring(0,1)),g=a.codePointAt(0).toString(16).toUpperCase(),l="SELECT * WHERE B='"+g+"' LIMIT 1",I(k,null,l,!0,!0,function(h){var r="";if("undefined"!=typeof h&&null!=h&&"string"==typeof h.status&&"ok"==h.status){var m=h.table;if("undefined"!=typeof m.rows&&null!=m.rows&&0<m.rows.length)for(h=h.table.rows,m=0;m<h.length;m++)null!=h[m].c[2]&&"string"==typeof h[m].c[2].v&&(r+=h[m].c[2].v,
null!=h[m].c[3]&&"string"==typeof h[m].c[3].v&&(r+=h[m].c[3].v))}c=r}));return p.return(new Promise(function(h){var r=setInterval(function(){if("string"==typeof c||30<e)return clearInterval(r),30<e&&(c=""),h(c);e++},100)}))})}function u(a,k){var c,e,g,l;return Z(function(p){switch(p.b){case 1:return e=c="",g="https://g0v.github.io/zh-stroke-data/utf8/",X(p,f(a,L),2);case 2:c=p.m;if(""!=c&&/<Stroke>/i.test(c)){p.b=3;break}console.log("fetch data from GitHub ...");e=g+a.codePointAt(0).toString(16)+
".xml";p.C=4;return X(p,fetch(e),6);case 6:return l=p.m,X(p,l.text(),7);case 7:c=p.m;p.b=3;p.C=0;break;case 4:p.C=0,p.i=null,c="";case 3:return""==c||/<Stroke>/i.test(c)||(c=""),"function"==typeof k&&k(c),p.return(c)}})}function z(a,k){var c,e,g,l;return Z(function(p){if(1==p.b)return"string"!=typeof a&&(a="\u96c4"),c=null,X(p,u(a),2);g=p.m;if("string"==typeof g&&0<g.length&&g.match(/<Stroke>/i)){c=x(w(g),a);var h=RegExp;var r=a;r="string"==typeof r?r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"):r;l=
new h(r+"\\t([^\\t]+)\\t([^\\t]+)\\t([^\\n]*)\n*");if((e=window.stroke_parts_data.match(l))&&3<e.length)c.H="/sound/"+(/\.m4a/.test(e[2])?e[2]:e[2]+".mp3"),c.l=e[3];else{h=c;var m;r=0<(m="\u3000\u3105\u3106\u3107\u3108\u3109\u310a\u310b\u310c\u310d\u310e\u310f\u3110\u3111\u3112\u3113\u3114\u3115\u3116\u3117\u3118\u3119\u311a\u311b\u311c\u311d\u311e\u311f\u3120\u3121\u3122\u3123\u3124\u3125\u3126\u3127\u3128\u3129".indexOf(a))?"/bopomo_sound/f/f"+m+".mp3":"";if(h.H=r)c.l=""}}if("function"==typeof k)k(c);
else return p.return(c);p.b=0})}function D(a,k){d(a,function(){"undefined"!=typeof window.stroke_parts_data&&null!=window.stroke_parts_data&&(window.stroke_parts_data=window.stroke_parts_data.trim().replace(/\r/g,"\n").replace(/\n+/g,"\n"));"function"==typeof k&&k()})}function G(a,k,c,e){var g="";!/^https:\/\//.test(a)&&20<a.length?g=a:/\/d\/([^\/]{20}[^\/]+)\//.test(a)&&(g=window.RegExp.lastParen);var l=a.match(/[#&\?]gid=(\d+)/);l=l&&1<l.length?l[1]:"-1";a="";""!=g&&(a="https://docs.google.com/spreadsheets/d/"+
g+"/gviz/tq?tqx=out:json","string"==typeof k&&""!=k.replace(/\s/g,"")?a+="&sheet="+encodeURIComponent(k):"-1"!=l&&(a+="&gid="+l),"string"==typeof c&&""!=c.replace(/\s/g,"")&&(c=encodeURIComponent(c),a+="&tq="+c),"number"==typeof e&&(a+="&headers="+e));return a}function S(a,k){var c=document.createElement("script");"undefined"==typeof window.google&&(window.google={});"undefined"==typeof window.google.visualization&&(window.google.visualization={});"undefined"==typeof window.google.visualization.Query&&
(window.google.visualization.Query={});window.google.visualization.Query.setResponse=k;c.setAttribute("type","text/javascript");c.setAttribute("charset","utf-8");c.setAttribute("src",a);c.onload=c.onreadystatechange=function(){c.readyState&&"loaded"!==c.readyState&&"complete"!==c.readyState||(c.onload=c.onreadystatechange=null,document.getElementsByTagName("head")[0].removeChild(c))};c.onerror=function(){c.onerror=null;document.getElementsByTagName("head")[0].removeChild(c);if("function"==typeof k)k();
else{var e="\u7121\u6cd5\u8f09\u5165\u8a2d\u5b9a.",g=document.querySelector(".resultBlock");"undefined"!=typeof g&&null!=g&&(e+="\n\n\u8acb\u78ba\u8a8d\u4e00\u4e0b:\n\n* \u8a66\u7b97\u8868\u5171\u7528\u9023\u7d50\u7684\u7db2\u5740\u662f\u5426\u6b63\u78ba, \n\n* \u662f\u5426\u958b\u653e\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u6aa2\u8996.",g.style.display="none");setTimeout(function(){console.log(e)},100)}};a=document.getElementsByTagName("head")[0];a.insertBefore(c,a.firstChild)}function I(a,k,c,e,g,
l){"string"!=typeof a?a="":/^https:\/\//i.test(a)||(a="https://docs.google.com/spreadsheets/d/"+a+"/edit?usp=sharing");"boolean"!=typeof g&&(g=!0);if(/^https:\/\//i.test(a)&&/spreadsheets/.test(a)){var p="";k=null;"boolean"==typeof e&&e&&(k=0);a=G(a,null,c,k);S(a,function(h){if("boolean"==typeof e&&e)"function"==typeof l?l(h):console.log(h);else{if("undefined"!=typeof h&&null!=h&&"string"==typeof h.status&&"ok"==h.status&&"undefined"!=typeof h.table.rows&&null!=h.table.rows&&0<h.table.rows.length){p=
"";var r=-1,m=0,n=h.table.cols;if(0==h.table.parsedNumHeaders)for(var v=h.table.rows[0].c,q=0;q<v.length;q++){var C=h.table.rows[0].c[q].v;if("string"==typeof C&&"\u6210\u8a9e"==C.trim()){r=q;m=1;break}}else for(q=0;q<n.length;q++)if("\u6210\u8a9e"==n[q].label.trim()){r=q;break}0>r&&(r=0,0<h.table.parsedNumHeaders&&(C=h.table.cols[r].label,"string"==typeof C&&""!=C.replace(/\s/g,"")&&(p+=C.trim())));console.log("get @"+r,"from "+m,n);if(0<=r)for(q=m;q<h.table.rows.length;q++)m=h.table.rows[q].c[r],
"undefined"!=typeof m&&null!=m?"string"==typeof m.v&&""!=m.v.replace(/\s/g,"")?p+=m.v.trim()+"\n":g||(p+="\n"):g||(p+="\n")}""!=p?"function"==typeof l?l(p):console.log(p):("undefined"!=typeof h&&null!=h&&"undefined"!=typeof h.table&&console.log(h.table),console.log("\u7121\u6cd5\u8f09\u5165\u8cc7\u6599, \u8acb\u78ba\u8a8d\u8a66\u7b97\u8868\u4e2d\u7684\u5167\u5bb9\u5f8c\u518d\u8a66"))}})}else console.log("\u7121\u6cd5\u8f09\u5165\u8cc7\u6599, \u7db2\u5740\u4e0d\u662f\u8a66\u7b97\u8868\u7684\uff0c\u8acb\u78ba\u8a8d\u5f8c\u518d\u8a66")}
function K(a,k,c,e,g){return Z(function(l){return X(l,z(a,function(p){var h;return Z(function(r){var m=p,n=k,v=c,q=!1,C=!1,H=e,A="";if("number"!=typeof n||2<n)n=0;v="boolean"==typeof v&&v;q="boolean"==typeof q&&q;C="boolean"==typeof C&&C;H="boolean"==typeof H&&H;if(m||"undefined"!=typeof window.localStorage[a]&&window.localStorage[a].match(/<stroke>/i)){m||(m=x(w(window.localStorage[a]),a));A=m.h.length;"string"!=typeof m.l&&(m.l="1-"+A);n=t(m.l,n);var E=0;if("undefined"!=typeof n&&null!=n&&0<n.length){var y=
0;do{var B=0;do 0<n[y][B]&&n[y][B]<=A?(E++,B++):n[y].splice(B,1);while(0<n[y].length&&B<n[y].length);0<n[y].length?y++:n.splice(y,1)}while(0<n.length&&y<n.length)}if(1>E||E>A)n=t("1-"+A);else if(E<A){E={};for(y=0;y<A;y++)E[y+1]=y+1;for(y in n)for(B in n[y])delete E[n[y][B]];0<Object.values(E).length&&n.push(Object.values(E))}A='<svg id="'+a+'" viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">\n';for(y=0;y<n.length;y++){A+='<g fill="'+M[y%M.length]+'" fill-opacity="1" stroke="#000000" stroke-width="0" stroke-linejoin="round" stroke-opacity="0">';
if(v)E=F(m.N,n[y],0,0),A+='<path d="'+E+'" />';else for(A+="\n",B=0;B<n[y].length;B++){var J=n[y][B];E=F(m.N,J,0,0);A+='<path id="t'+J+'" d="'+E+'" />\n'}A+="</g>\n"}if(q){v=A;q=m;n=B=void 0;"number"!=typeof B&&(B=0);"number"!=typeof n&&(n=0);y="";if(q||"undefined"!=typeof window.localStorage[a]&&window.localStorage[a].match(/<stroke>/i))for(q||(q=x(w(window.localStorage[a]),a)),A=q.h.length,E=0;E<A;E++){var U=q.h[E][0];J=Number(U.getAttribute("x"))+B;U=Number(U.getAttribute("y"))+n;y+='<text class="number" style="font-size:100px;font-style:bold;" x="'+
J+'" y="'+U+'">'+(E+1)+"</text>\n"}A=v+y}if(C){C=A;v=m;B=q=void 0;"number"!=typeof q&&(q=0);"number"!=typeof B&&(B=0);n="";if(v||"undefined"!=typeof window.localStorage[a]&&window.localStorage[a].match(/<stroke>/i)){v||(v=x(w(window.localStorage[a]),a));var N=v.h.length;for(y=0;y<N;y++)for(A=0;A<v.h[y].length;A++)J=v.h[y][A],"MoveTo"==J.nodeName&&(E=Number(J.getAttribute("x"))+q,J=Number(J.getAttribute("y"))+B,n+=(0==A?" M":" L")+E+" "+J)}n=n.trim();if(""!=n)var V='<circle cx="0" cy="0" r="120" style="fill:#ff0000a0;"><animateMotion begin="0s" dur="'+
((15>N?10>N?"5s":"8s":"10s")+'" path="'+n+'"  repeatCount="indefinite" /></circle>');A=C+("\n"+V+"\n")}if(H){H=A;var W;N=[];if(v=m.h)for(q=0;q<v.length;q++){V=[];for(B=0;B<v[q].length;B++)C=[],C.push(parseFloat(v[q][B].getAttribute("x"))),C.push(parseFloat(v[q][B].getAttribute("y"))),(W=v[q][B].getAttribute("size"))&&C.push(parseFloat(W)),V.push(C.join(","));N.push(V.join(" "))}W=JSON.stringify({unicode:m.$,tracks:N,parts:m.l,sound:m.H});A=H+("<desc>"+W+"</desc>\n")}A+="</svg>\n"}h=A;"function"==
typeof g&&g(a,h);return r.return(h)})}),0)})}var L="",M="#ff6699 #56B4E9 #009E73 #F0E442 #ff9933 #FFBAA3 #9169EC #7B92BE".split(" ");"undefined"!=typeof window.stroke_parts_data&&null!=window.stroke_parts_data||D("https://gsyan888.github.io/html5_fun/html5_stroke_parts/stroke_parts_data.js");L=function(a){var k=Math.floor((new Date).getTime()/1E3%a.length);console.log("stroke data from: happy"+(2009+2*k)+" ...");return"https://docs.google.com/spreadsheets/d/"+a[k]+"/edit?usp=drive_link"}(["1cRQDIHe0isKNtKCvvXtP-I52d-1zCV1owDCo2cm164k",
"1m3BmNOTOIPP1j89TYX8h7Gy4p4bfmCG-YSPMGGefgks","1nY3sRsX21JiHnyg4UP0VhSxw2yN-m2KkKHAgoGJvvFk"]);b.toSVG=function(a,k,c,e,g,l,p,h){var r={},m=[];"number"!=typeof k&&(k=0);c="boolean"==typeof c&&c;e="boolean"==typeof e&&e;g="boolean"==typeof g&&g;"string"==typeof a&&(a=Array.from(a.trim()));if(0<a.length){var n=function(v){if(0<v.length){var q=v.splice(0,1)[0];"function"==typeof l&&l(q);"undefined"==typeof r[q]?(console.log("fetch "+q+"..."),K(q,k,c,e,function(C,H){""!=H&&(g?(H=new File([H],"\u7b46\u9806-"+
C+".svg",{type:"image/svg+xml"}),m.push(H)):m.push(H),r[C]=m.length-1);0<v.length?setTimeout(function(){n(v)},Math.floor(1E3*(h||1))):n(v)})):(m.push(m[r[q]]),n(v))}else"function"==typeof l&&l(100,!0),"function"==typeof p&&p(m)};n(a)}};b.getTrack=function(a,k){var c=[],e=[];if((a=a.querySelector("desc"))&&/tracks/.test(a.innerHTML)&&""!=a.innerHTML.replace(/\s/g,""))try{e=JSON.parse(a.innerHTML).tracks}catch(m){e=[]}for(var g=0;g<e.length;g++){var l=[];a=e[g].trim().split(/\s+/);for(var p=0;p<a.length;p++){var h=
a[p].trim().split(",");if(1<h.length){var r={x:parseFloat(h[0]),y:parseFloat(h[1])};isNaN(h[2])||(r.size=parseFloat(h[2]));l.push(r)}}0<l.length&&c.push(l)}"function"==typeof k&&k(c);return c};b.getSoundUrl=function(a){return/bopomo/.test(a)?"https://gsyan888.github.io/html5_fun/html5_stroke_parts"+a:"https://stroke-order.learningweb.moe.edu.tw"+a}})("undefined"!==typeof exports?exports:window.moeStroke=window.moeStroke||{});})();
