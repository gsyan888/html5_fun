(function () {var O="function"==typeof Object.defineProperties?Object.defineProperty:function(c,d,r){if(c==Array.prototype||c==Object.prototype)return c;c[d]=r.value;return c};function aa(c){c=["object"==typeof globalThis&&globalThis,c,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var d=0;d<c.length;++d){var r=c[d];if(r&&r.Math==Math)return r}throw Error("Cannot find global object");}var P=aa(this);
function Q(c,d){if(d)a:{var r=P;c=c.split(".");for(var w=0;w<c.length-1;w++){var x=c[w];if(!(x in r))break a;r=r[x]}c=c[c.length-1];w=r[c];d=d(w);d!=w&&null!=d&&O(r,c,{configurable:!0,writable:!0,value:d})}}function ba(c){var d=0;return function(){return d<c.length?{done:!1,value:c[d++]}:{done:!0}}}function ca(c){var d="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];return d?d.call(c):{next:ba(c)}}
function R(){this.o=!1;this.g=null;this.m=void 0;this.b=1;this.K=this.C=0;this.i=null}function T(c){if(c.o)throw new TypeError("Generator is already running");c.o=!0}R.prototype.s=function(c){this.m=c};R.prototype.A=function(c){this.i={R:c,U:!0};this.b=this.C||this.K};R.prototype.return=function(c){this.i={return:c};this.b=this.K};function X(c,d,r){c.b=r;return{value:d}}function da(c){this.a=new R;this.V=c}
da.prototype.s=function(c){T(this.a);if(this.a.g)return ea(this,this.a.g.next,c,this.a.s);this.a.s(c);return Y(this)};function fa(c,d){T(c.a);var r=c.a.g;if(r)return ea(c,"return"in r?r["return"]:function(w){return{value:w,done:!0}},d,c.a.return);c.a.return(d);return Y(c)}da.prototype.A=function(c){T(this.a);if(this.a.g)return ea(this,this.a.g["throw"],c,this.a.s);this.a.A(c);return Y(this)};
function ea(c,d,r,w){try{var x=d.call(c.a.g,r);if(!(x instanceof Object))throw new TypeError("Iterator result "+x+" is not an object");if(!x.done)return c.a.o=!1,x;var F=x.value}catch(g){return c.a.g=null,c.a.A(g),Y(c)}c.a.g=null;w.call(c.a,F);return Y(c)}function Y(c){for(;c.a.b;)try{var d=c.V(c.a);if(d)return c.a.o=!1,{value:d.value,done:!1}}catch(r){c.a.m=void 0,c.a.A(r)}c.a.o=!1;if(c.a.i){d=c.a.i;c.a.i=null;if(d.U)throw d.R;return{value:d.return,done:!0}}return{value:void 0,done:!0}}
function ha(c){this.next=function(d){return c.s(d)};this.throw=function(d){return c.A(d)};this.return=function(d){return fa(c,d)};this[Symbol.iterator]=function(){return this}}function ia(c){function d(w){return c.next(w)}function r(w){return c.throw(w)}return new Promise(function(w,x){function F(g){g.done?w(g.value):Promise.resolve(g.value).then(d,r).then(F,x)}F(c.next())})}function Z(c){return ia(new ha(new da(c)))}
Q("Symbol",function(c){function d(x){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new r("jscomp_symbol_"+(x||"")+"_"+w++,x)}function r(x,F){this.O=x;O(this,"description",{configurable:!0,writable:!0,value:F})}if(c)return c;r.prototype.toString=function(){return this.O};var w=0;return d});
Q("Symbol.iterator",function(c){if(c)return c;c=Symbol("Symbol.iterator");for(var d="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<d.length;r++){var w=P[d[r]];"function"===typeof w&&"function"!=typeof w.prototype[c]&&O(w.prototype,c,{configurable:!0,writable:!0,value:function(){return ja(ba(this))}})}return c});function ja(c){c={next:c};c[Symbol.iterator]=function(){return this};return c}
Q("Promise",function(c){function d(g){this.u=0;this.G=void 0;this.j=[];var t=this.D();try{g(t.resolve,t.reject)}catch(z){t.reject(z)}}function r(){this.f=null}function w(g){return g instanceof d?g:new d(function(t){t(g)})}if(c)return c;r.prototype.I=function(g){if(null==this.f){this.f=[];var t=this;this.J(function(){t.S()})}this.f.push(g)};var x=P.setTimeout;r.prototype.J=function(g){x(g,0)};r.prototype.S=function(){for(;this.f&&this.f.length;){var g=this.f;this.f=[];for(var t=0;t<g.length;++t){var z=
g[t];g[t]=null;try{z()}catch(D){this.P(D)}}}this.f=null};r.prototype.P=function(g){this.J(function(){throw g;})};d.prototype.D=function(){function g(D){return function(G){z||(z=!0,D.call(t,G))}}var t=this,z=!1;return{resolve:g(this.X),reject:g(this.F)}};d.prototype.X=function(g){if(g===this)this.F(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof d)this.Y(g);else{a:switch(typeof g){case "object":var t=null!=g;break a;case "function":t=!0;break a;default:t=!1}t?this.W(g):this.L(g)}};
d.prototype.W=function(g){var t=void 0;try{t=g.then}catch(z){this.F(z);return}"function"==typeof t?this.Z(t,g):this.L(g)};d.prototype.F=function(g){this.M(2,g)};d.prototype.L=function(g){this.M(1,g)};d.prototype.M=function(g,t){if(0!=this.u)throw Error("Cannot settle("+g+", "+t+"): Promise already settled in state"+this.u);this.u=g;this.G=t;this.T()};d.prototype.T=function(){if(null!=this.j){for(var g=0;g<this.j.length;++g)F.I(this.j[g]);this.j=null}};var F=new r;d.prototype.Y=function(g){var t=this.D();
g.B(t.resolve,t.reject)};d.prototype.Z=function(g,t){var z=this.D();try{g.call(t,z.resolve,z.reject)}catch(D){z.reject(D)}};d.prototype.then=function(g,t){function z(H,J){return"function"==typeof H?function(K){try{D(H(K))}catch(L){G(L)}}:J}var D,G,S=new d(function(H,J){D=H;G=J});this.B(z(g,D),z(t,G));return S};d.prototype.catch=function(g){return this.then(void 0,g)};d.prototype.B=function(g,t){function z(){switch(D.u){case 1:g(D.G);break;case 2:t(D.G);break;default:throw Error("Unexpected state: "+
D.u);}}var D=this;null==this.j?F.I(z):this.j.push(z)};d.resolve=w;d.reject=function(g){return new d(function(t,z){z(g)})};d.race=function(g){return new d(function(t,z){for(var D=ca(g),G=D.next();!G.done;G=D.next())w(G.value).B(t,z)})};d.all=function(g){var t=ca(g),z=t.next();return z.done?w([]):new d(function(D,G){function S(K){return function(L){H[K]=L;J--;0==J&&D(H)}}var H=[],J=0;do H.push(void 0),J++,w(z.value).B(S(H.length-1),G),z=t.next();while(!z.done)})};return d});
Q("String.prototype.codePointAt",function(c){return c?c:function(d){if(null==this)throw new TypeError("The 'this' value for String.prototype.codePointAt must not be null or undefined");var r=this+"";var w=r.length;d=Number(d)||0;if(0<=d&&d<w){d|=0;var x=r.charCodeAt(d);if(55296>x||56319<x||d+1===w)return x;d=r.charCodeAt(d+1);return 56320>d||57343<d?x:1024*(x-55296)+d+9216}}});
Q("Array.from",function(c){return c?c:function(d,r,w){r=null!=r?r:function(t){return t};var x=[],F="undefined"!=typeof Symbol&&Symbol.iterator&&d[Symbol.iterator];if("function"==typeof F){d=F.call(d);for(var g=0;!(F=d.next()).done;)x.push(r.call(w,F.value,g++))}else for(F=d.length,g=0;g<F;g++)x.push(r.call(w,d[g],g));return x}});
(function(c){function d(a,e){var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","utf-8");b.setAttribute("src",a);b.onload=b.onreadystatechange=function(){b.readyState&&"loaded"!==b.readyState&&"complete"!==b.readyState||(b.onload=b.onreadystatechange=null,document.getElementsByTagName("head")[0].removeChild(b),e())};b.onerror=function(){b.onerror=null;document.getElementsByTagName("head")[0].removeChild(b);"function"==typeof e&&e()};a=document.getElementsByTagName("head")[0];
a.insertBefore(b,a.firstChild)}function r(a,e){var b=[];if("number"!=typeof e||0>e)e=0;if("string"==typeof a&&""!=a.replace(/\s/g,"")){a=a.split("~");if("undefined"!=typeof a&&null!=a){var f=0;do""==a[f]?a.splice(f,1):f++;while(f<a.length)}if(e<a.length&&(a=a[e],a=a.replace(/[^0-9\-,;]/g,""),""!=a))for(e=a.split(";"),a=0;a<e.length;a++){f=e[a].split(",");for(var h=0;h<f.length;h++)if(0<f[h].length){"undefined"==typeof b[a]&&(b[a]=[]);var q=f[h].match(/(\d+)-(\d+)/);if(null!=q&&3<=q.length){var n=
parseInt(q[1],10);q=parseInt(q[2],10);if(n>q){var k=q;q=n;n=k}for(;n<=q;n++)b[a].push(n)}else n=parseInt(f[h],10),isNaN(n)||b[a].push(n)}}}return b}function w(a){if(window.ActiveXObject){var e=new ActiveXObject("Microsoft.XMLDOM");e.async="false";e.loadXML(a)}else e=(new DOMParser).parseFromString(a,"text/xml");return e}function x(a){for(var e=[],b=[],f=0,h=a.getElementsByTagName("Stroke"),q=0;q<h.length;q++)if(1==h[q].nodeType){e[f]=[];b[f]=[];for(var n=h[q].childNodes,k=0,p=0,l=0;l<n.length;l++)if(1==
n[l].nodeType)if("Outline"==n[l].nodeName)for(var m=n[l].childNodes,v=0;v<m.length;v++)1==m[v].nodeType&&(e[f][k]=m[v],k++);else if("Track"==n[l].nodeName)for(b[f][p]=[],m=n[l].childNodes,v=0;v<m.length;v++)1==m[v].nodeType&&(b[f][p]=m[v],p++);f++}f=a.getElementsByTagName("Word")[0].getAttribute("unicode");"string"==typeof f&&e&&b&&("\u61c2"==f&&32==e.length&&32==b.length?(e.splice(16),b.splice(16),console.log("\u522a\u9664-\u61c2-16\u756b\u5f8c\u591a\u51fa\u768416\u7b46\u8cc7\u6599")):"\u8d10"==
f?(h=e[11].splice(0),e[11]=e[12].splice(0),e[12]=h,h=b[11].splice(0),b[11]=b[12].splice(0),b[12]=h,console.log("\u4ea4\u63db-\u8d10-\u768412, 13 \u756b")):"\u69bb"==f&&15==e.length&&15==b.length?(e.splice(14,1),b.splice(14,1),console.log("\u522a\u9664-\u69bb-\u591a\u51fa\u7684\u7b2c15\u7b46\u8cc7\u6599")):"\u779e"==f&&17==e.length&&17==b.length?(e.splice(16,1),b.splice(16,1),console.log("\u522a\u9664-\u779e-\u591a\u51fa\u7684\u7b2c17\u7b46\u8cc7\u6599")):"\u6170"==f&&18==e.length&&18==b.length?(e.splice(15),
b.splice(15),console.log("\u522a\u9664-\u6170-15\u756b\u5f8c\u591a\u51fa\u76843\u7b46\u8cc7\u6599")):"\u53eb"==f&&b[4]&&3==b[4].length?(h=b[4][1],b[4][1]=b[4][2],b[4][2]=h,console.log("\u4ea4\u63db-\u53eb-5\u756b\u7684\u6b65\u9a5f2, 3")):"\u554a"==f&&b[8]&&5==b[8].length&&(h=b[8][3],b[8][3]=b[8][4],b[8][4]=h,console.log("\u4ea4\u63db-\u554a-9\u756b\u7684\u6b65\u9a5f4, 5")));h={};h.$=f;h.N=e;h.h=b;h.H=a.getElementsByTagName("Word")[0].getAttribute("sound");h.l=a.getElementsByTagName("Word")[0].getAttribute("parts");
return h}function F(a,e,b,f){var h="";if("undefined"==typeof a||null==a)return h;"number"!=typeof b&&(b=0);"number"!=typeof f&&(f=0);"number"==typeof e&&(e=[e]);for(var q=0;q<e.length;q++){for(var n=a[e[q]-1],k=0;k<n.length;k++){var p=n[k];switch(p.nodeName){case "MoveTo":var l=Number(p.getAttribute("x"))+b;var m=Number(p.getAttribute("y"))+f;h+=" M"+l+" "+m;break;case "LineTo":l=Number(p.getAttribute("x"))+b;m=Number(p.getAttribute("y"))+f;h+=" L"+l+" "+m;break;case "QuadTo":l=Number(p.getAttribute("x1"))+
b;m=Number(p.getAttribute("y1"))+f;var v=Number(p.getAttribute("x2"))+b;var u=Number(p.getAttribute("y2"))+f;h+=" Q"+l+" "+m+" "+v+" "+u;break;case "CubicTo":l=Number(p.getAttribute("x1"))+b;m=Number(p.getAttribute("y1"))+f;v=Number(p.getAttribute("x2"))+b;u=Number(p.getAttribute("y2"))+f;var B=Number(p.getAttribute("x3"))+b;p=Number(p.getAttribute("y3"))+f;h+=" C"+l+" "+m+" "+v+" "+u+" "+B+" "+p}}h+=" Z"}return h=h.trim()}function g(a,e){var b,f,h,q;return Z(function(n){b=null;f=0;"string"!=typeof a||
""==a.replace(/\s/g,"")||"string"!=typeof e||""==e.replace(/\s/g,"")?f=31:(a=a.trim(),e=e.trim(),1<a.length&&(a=a.substring(0,1)),h=a.codePointAt(0).toString(16).toUpperCase(),q="SELECT * WHERE B='"+h+"' LIMIT 1",H(e,null,q,!0,!0,function(k){var p="";if("undefined"!=typeof k&&null!=k&&"string"==typeof k.status&&"ok"==k.status){var l=k.table;if("undefined"!=typeof l.rows&&null!=l.rows&&0<l.rows.length)for(k=k.table.rows,l=0;l<k.length;l++)null!=k[l].c[2]&&"string"==typeof k[l].c[2].v&&(p+=k[l].c[2].v,
null!=k[l].c[3]&&"string"==typeof k[l].c[3].v&&(p+=k[l].c[3].v))}b=p}));return n.return(new Promise(function(k){var p=setInterval(function(){if("string"==typeof b||30<f)return clearInterval(p),30<f&&(b=""),k(b);f++},100)}))})}function t(a,e){var b,f,h,q;return Z(function(n){switch(n.b){case 1:return f=b="",h="https://g0v.github.io/zh-stroke-data/utf8/",X(n,g(a,K),2);case 2:b=n.m;if(""!=b&&/<Stroke>/i.test(b)){n.b=3;break}console.log("fetch data from GitHub ...");f=h+a.codePointAt(0).toString(16)+
".xml";n.C=4;return X(n,fetch(f),6);case 6:return q=n.m,X(n,q.text(),7);case 7:b=n.m;n.b=3;n.C=0;break;case 4:n.C=0,n.i=null,b="";case 3:return""==b||/<Stroke>/i.test(b)||(b=""),"function"==typeof e&&e(b),n.return(b)}})}function z(a,e){var b,f,h,q;return Z(function(n){if(1==n.b)return"string"!=typeof a&&(a="\u96c4"),b=null,X(n,t(a),2);h=n.m;if("string"==typeof h&&0<h.length&&h.match(/<Stroke>/i)){b=x(w(h));var k=RegExp;var p=a;p="string"==typeof p?p.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"):p;q=new k(p+
"\\t([^\\t]+)\\t([^\\t]+)\\t([^\\n]*)\n*");if((f=window.stroke_parts_data.match(q))&&3<f.length)b.H="/sound/"+(/\.m4a/.test(f[2])?f[2]:f[2]+".mp3"),b.l=f[3];else{k=b;var l;p=0<(l="\u3000\u3105\u3106\u3107\u3108\u3109\u310a\u310b\u310c\u310d\u310e\u310f\u3110\u3111\u3112\u3113\u3114\u3115\u3116\u3117\u3118\u3119\u311a\u311b\u311c\u311d\u311e\u311f\u3120\u3121\u3122\u3123\u3124\u3125\u3126\u3127\u3128\u3129".indexOf(a))?"/bopomo_sound/f/f"+l+".mp3":"";if(k.H=p)b.l=""}}if("function"==typeof e)e(b);else return n.return(b);
n.b=0})}function D(a,e){d(a,function(){"undefined"!=typeof window.stroke_parts_data&&null!=window.stroke_parts_data&&(window.stroke_parts_data=window.stroke_parts_data.trim().replace(/\r/g,"\n").replace(/\n+/g,"\n"));"function"==typeof e&&e()})}function G(a,e,b,f){var h="";!/^https:\/\//.test(a)&&20<a.length?h=a:/\/d\/([^\/]{20}[^\/]+)\//.test(a)&&(h=window.RegExp.lastParen);var q=a.match(/[#&\?]gid=(\d+)/);q=q&&1<q.length?q[1]:"-1";a="";""!=h&&(a="https://docs.google.com/spreadsheets/d/"+h+"/gviz/tq?tqx=out:json",
"string"==typeof e&&""!=e.replace(/\s/g,"")?a+="&sheet="+encodeURIComponent(e):"-1"!=q&&(a+="&gid="+q),"string"==typeof b&&""!=b.replace(/\s/g,"")&&(b=encodeURIComponent(b),a+="&tq="+b),"number"==typeof f&&(a+="&headers="+f));return a}function S(a,e){var b=document.createElement("script");"undefined"==typeof window.google&&(window.google={});"undefined"==typeof window.google.visualization&&(window.google.visualization={});"undefined"==typeof window.google.visualization.Query&&(window.google.visualization.Query=
{});window.google.visualization.Query.setResponse=e;b.setAttribute("type","text/javascript");b.setAttribute("charset","utf-8");b.setAttribute("src",a);b.onload=b.onreadystatechange=function(){b.readyState&&"loaded"!==b.readyState&&"complete"!==b.readyState||(b.onload=b.onreadystatechange=null,document.getElementsByTagName("head")[0].removeChild(b))};b.onerror=function(){b.onerror=null;document.getElementsByTagName("head")[0].removeChild(b);if("function"==typeof e)e();else{var f="\u7121\u6cd5\u8f09\u5165\u8a2d\u5b9a.",
h=document.querySelector(".resultBlock");"undefined"!=typeof h&&null!=h&&(f+="\n\n\u8acb\u78ba\u8a8d\u4e00\u4e0b:\n\n* \u8a66\u7b97\u8868\u5171\u7528\u9023\u7d50\u7684\u7db2\u5740\u662f\u5426\u6b63\u78ba, \n\n* \u662f\u5426\u958b\u653e\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u6aa2\u8996.",h.style.display="none");setTimeout(function(){console.log(f)},100)}};a=document.getElementsByTagName("head")[0];a.insertBefore(b,a.firstChild)}function H(a,e,b,f,h,q){"string"!=typeof a?a="":/^https:\/\//i.test(a)||
(a="https://docs.google.com/spreadsheets/d/"+a+"/edit?usp=sharing");"boolean"!=typeof h&&(h=!0);if(/^https:\/\//i.test(a)&&/spreadsheets/.test(a)){var n="";e=null;"boolean"==typeof f&&f&&(e=0);a=G(a,null,b,e);S(a,function(k){if("boolean"==typeof f&&f)"function"==typeof q?q(k):console.log(k);else{if("undefined"!=typeof k&&null!=k&&"string"==typeof k.status&&"ok"==k.status&&"undefined"!=typeof k.table.rows&&null!=k.table.rows&&0<k.table.rows.length){n="";var p=-1,l=0,m=k.table.cols;if(0==k.table.parsedNumHeaders)for(var v=
k.table.rows[0].c,u=0;u<v.length;u++){var B=k.table.rows[0].c[u].v;if("string"==typeof B&&"\u6210\u8a9e"==B.trim()){p=u;l=1;break}}else for(u=0;u<m.length;u++)if("\u6210\u8a9e"==m[u].label.trim()){p=u;break}0>p&&(p=0,0<k.table.parsedNumHeaders&&(B=k.table.cols[p].label,"string"==typeof B&&""!=B.replace(/\s/g,"")&&(n+=B.trim())));console.log("get @"+p,"from "+l,m);if(0<=p)for(u=l;u<k.table.rows.length;u++)l=k.table.rows[u].c[p],"undefined"!=typeof l&&null!=l?"string"==typeof l.v&&""!=l.v.replace(/\s/g,
"")?n+=l.v.trim()+"\n":h||(n+="\n"):h||(n+="\n")}""!=n?"function"==typeof q?q(n):console.log(n):("undefined"!=typeof k&&null!=k&&"undefined"!=typeof k.table&&console.log(k.table),console.log("\u7121\u6cd5\u8f09\u5165\u8cc7\u6599, \u8acb\u78ba\u8a8d\u8a66\u7b97\u8868\u4e2d\u7684\u5167\u5bb9\u5f8c\u518d\u8a66"))}})}else console.log("\u7121\u6cd5\u8f09\u5165\u8cc7\u6599, \u7db2\u5740\u4e0d\u662f\u8a66\u7b97\u8868\u7684\uff0c\u8acb\u78ba\u8a8d\u5f8c\u518d\u8a66")}function J(a,e,b,f,h){return Z(function(q){return X(q,
z(a,function(n){var k;return Z(function(p){var l=n,m=e,v=b,u=!1,B=!1,M=f,A="";if("number"!=typeof m||2<m)m=0;v="boolean"==typeof v&&v;u="boolean"==typeof u&&u;B="boolean"==typeof B&&B;M="boolean"==typeof M&&M;if(l||"undefined"!=typeof window.localStorage[a]&&window.localStorage[a].match(/<stroke>/i)){l||(l=x(w(window.localStorage[a])));A=l.h.length;"string"!=typeof l.l&&(l.l="1-"+A);m=r(l.l,m);var E=0;if("undefined"!=typeof m&&null!=m&&0<m.length){var y=0;do{var C=0;do 0<m[y][C]&&m[y][C]<=A?(E++,
C++):m[y].splice(C,1);while(0<m[y].length&&C<m[y].length);0<m[y].length?y++:m.splice(y,1)}while(0<m.length&&y<m.length)}if(1>E||E>A)m=r("1-"+A);else if(E<A){E={};for(y=0;y<A;y++)E[y+1]=y+1;for(y in m)for(C in m[y])delete E[m[y][C]];0<Object.values(E).length&&m.push(Object.values(E))}A='<svg id="'+a+'" viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">\n';for(y=0;y<m.length;y++){A+='<g fill="'+L[y%L.length]+'" fill-opacity="1" stroke="#000000" stroke-width="0" stroke-linejoin="round" stroke-opacity="0">';
if(v)E=F(l.N,m[y],0,0),A+='<path d="'+E+'" />';else for(A+="\n",C=0;C<m[y].length;C++){var I=m[y][C];E=F(l.N,I,0,0);A+='<path id="t'+I+'" d="'+E+'" />\n'}A+="</g>\n"}if(u){v=A;u=l;m=C=void 0;"number"!=typeof C&&(C=0);"number"!=typeof m&&(m=0);y="";if(u||"undefined"!=typeof window.localStorage[a]&&window.localStorage[a].match(/<stroke>/i))for(u||(u=x(w(window.localStorage[a]))),A=u.h.length,E=0;E<A;E++){var U=u.h[E][0];I=Number(U.getAttribute("x"))+C;U=Number(U.getAttribute("y"))+m;y+='<text class="number" style="font-size:100px;font-style:bold;" x="'+
I+'" y="'+U+'">'+(E+1)+"</text>\n"}A=v+y}if(B){B=A;v=l;C=u=void 0;"number"!=typeof u&&(u=0);"number"!=typeof C&&(C=0);m="";if(v||"undefined"!=typeof window.localStorage[a]&&window.localStorage[a].match(/<stroke>/i)){v||(v=x(w(window.localStorage[a])));var N=v.h.length;for(y=0;y<N;y++)for(A=0;A<v.h[y].length;A++)I=v.h[y][A],"MoveTo"==I.nodeName&&(E=Number(I.getAttribute("x"))+u,I=Number(I.getAttribute("y"))+C,m+=(0==A?" M":" L")+E+" "+I)}m=m.trim();if(""!=m)var V='<circle cx="0" cy="0" r="120" style="fill:#ff0000a0;"><animateMotion begin="0s" dur="'+
((15>N?10>N?"5s":"8s":"10s")+'" path="'+m+'"  repeatCount="indefinite" /></circle>');A=B+("\n"+V+"\n")}if(M){M=A;var W;N=[];if(v=l.h)for(u=0;u<v.length;u++){V=[];for(C=0;C<v[u].length;C++)B=[],B.push(parseFloat(v[u][C].getAttribute("x"))),B.push(parseFloat(v[u][C].getAttribute("y"))),(W=v[u][C].getAttribute("size"))&&B.push(parseFloat(W)),V.push(B.join(","));N.push(V.join(" "))}W=JSON.stringify({unicode:l.$,tracks:N,parts:l.l,sound:l.H});A=M+("<desc>"+W+"</desc>\n")}A+="</svg>\n"}k=A;"function"==
typeof h&&h(a,k);return p.return(k)})}),0)})}var K="",L="#ff6699 #56B4E9 #009E73 #F0E442 #ff9933 #FFBAA3 #9169EC #7B92BE".split(" ");"undefined"!=typeof window.stroke_parts_data&&null!=window.stroke_parts_data||D("https://gsyan888.github.io/html5_fun/html5_stroke_parts/stroke_parts_data.js");K=function(a){var e=Math.floor((new Date).getTime()/1E3%a.length);console.log("stroke data from: happy"+(2009+2*e)+" ...");return"https://docs.google.com/spreadsheets/d/"+a[e]+"/edit?usp=drive_link"}(["1cRQDIHe0isKNtKCvvXtP-I52d-1zCV1owDCo2cm164k",
"1m3BmNOTOIPP1j89TYX8h7Gy4p4bfmCG-YSPMGGefgks","1nY3sRsX21JiHnyg4UP0VhSxw2yN-m2KkKHAgoGJvvFk"]);c.toSVG=function(a,e,b,f,h,q,n){var k={},p=[];"number"!=typeof e&&(e=0);b="boolean"==typeof b&&b;f="boolean"==typeof f&&f;h="boolean"==typeof h&&h;"string"==typeof a&&(a=Array.from(a.trim()));if(0<a.length){var l=function(m){if(0<m.length){var v=m.splice(0,1)[0];"function"==typeof q&&q(v);"undefined"==typeof k[v]?(console.log("fetch "+v+"..."),J(v,e,b,f,function(u,B){""!=B&&(h?(B=new File([B],"\u7b46\u9806-"+
u+".svg",{type:"image/svg+xml"}),p.push(B)):p.push(B),k[u]=p.length-1);0<m.length?setTimeout(function(){l(m)},1E3):l(m)})):(p.push(p[k[v]]),l(m))}else"function"==typeof q&&q(100,!0),"function"==typeof n&&n(p)};l(a)}};c.getTrack=function(a,e){var b=[],f=[];if((a=a.querySelector("desc"))&&/tracks/.test(a.innerHTML)&&""!=a.innerHTML.replace(/\s/g,""))try{f=JSON.parse(a.innerHTML).tracks}catch(l){f=[]}for(var h=0;h<f.length;h++){var q=[];a=f[h].trim().split(/\s+/);for(var n=0;n<a.length;n++){var k=a[n].trim().split(",");
if(1<k.length){var p={x:parseFloat(k[0]),y:parseFloat(k[1])};isNaN(k[2])||(p.size=parseFloat(k[2]));q.push(p)}}0<q.length&&b.push(q)}"function"==typeof e&&e(b);return b};c.getSoundUrl=function(a){return/bopomo/.test(a)?"https://gsyan888.github.io/html5_fun/html5_stroke_parts"+a:"https://stroke-order.learningweb.moe.edu.tw"+a}})("undefined"!==typeof exports?exports:window.moeStroke=window.moeStroke||{});})();
