function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function ba(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}var ca="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
function da(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var ea=da(this);function r(a,b){if(b)a:{var c=ea;a=a.split(".");for(var d=0;d<a.length-1;d++){var f=a[d];if(!(f in c))break a;c=c[f]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ca(c,a,{configurable:!0,writable:!0,value:b})}}
function fa(){this.u=!1;this.i=null;this.s=void 0;this.g=1;this.P=this.F=0;this.j=null}function ha(a){if(a.u)throw new TypeError("Generator is already running");a.u=!0}fa.prototype.A=function(a){this.s=a};fa.prototype.C=function(a){this.j={Y:a,aa:!0};this.g=this.F||this.P};fa.prototype.return=function(a){this.j={return:a};this.g=this.P};function ia(a,b,c){a.g=c;return{value:b}}function ja(a){this.b=new fa;this.ba=a}
ja.prototype.A=function(a){ha(this.b);if(this.b.i)return ka(this,this.b.i.next,a,this.b.A);this.b.A(a);return la(this)};function ma(a,b){ha(a.b);var c=a.b.i;if(c)return ka(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.b.return);a.b.return(b);return la(a)}ja.prototype.C=function(a){ha(this.b);if(this.b.i)return ka(this,this.b.i["throw"],a,this.b.A);this.b.C(a);return la(this)};
function ka(a,b,c,d){try{var f=b.call(a.b.i,c);if(!(f instanceof Object))throw new TypeError("Iterator result "+f+" is not an object");if(!f.done)return a.b.u=!1,f;var h=f.value}catch(e){return a.b.i=null,a.b.C(e),la(a)}a.b.i=null;d.call(a.b,h);return la(a)}function la(a){for(;a.b.g;)try{var b=a.ba(a.b);if(b)return a.b.u=!1,{value:b.value,done:!1}}catch(c){a.b.s=void 0,a.b.C(c)}a.b.u=!1;if(a.b.j){b=a.b.j;a.b.j=null;if(b.aa)throw b.Y;return{value:b.return,done:!0}}return{value:void 0,done:!0}}
function na(a){this.next=function(b){return a.A(b)};this.throw=function(b){return a.C(b)};this.return=function(b){return ma(a,b)};this[Symbol.iterator]=function(){return this}}function oa(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,f){function h(e){e.done?d(e.value):Promise.resolve(e.value).then(b,c).then(h,f)}h(a.next())})}function pa(a){return oa(new na(new ja(a)))}
r("Symbol",function(a){function b(f){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c("jscomp_symbol_"+(f||"")+"_"+d++,f)}function c(f,h){this.W=f;ca(this,"description",{configurable:!0,writable:!0,value:h})}if(a)return a;c.prototype.toString=function(){return this.W};var d=0;return b});
r("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=ea[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&ca(d.prototype,a,{configurable:!0,writable:!0,value:function(){return qa(aa(this))}})}return a});function qa(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}
r("Promise",function(a){function b(e){this.B=0;this.L=void 0;this.l=[];var g=this.I();try{e(g.resolve,g.reject)}catch(k){g.reject(k)}}function c(){this.h=null}function d(e){return e instanceof b?e:new b(function(g){g(e)})}if(a)return a;c.prototype.M=function(e){if(null==this.h){this.h=[];var g=this;this.N(function(){g.Z()})}this.h.push(e)};var f=ea.setTimeout;c.prototype.N=function(e){f(e,0)};c.prototype.Z=function(){for(;this.h&&this.h.length;){var e=this.h;this.h=[];for(var g=0;g<e.length;++g){var k=
e[g];e[g]=null;try{k()}catch(l){this.X(l)}}}this.h=null};c.prototype.X=function(e){this.N(function(){throw e;})};b.prototype.I=function(){function e(l){return function(m){k||(k=!0,l.call(g,m))}}var g=this,k=!1;return{resolve:e(this.da),reject:e(this.K)}};b.prototype.da=function(e){if(e===this)this.K(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof b)this.ea(e);else{a:switch(typeof e){case "object":var g=null!=e;break a;case "function":g=!0;break a;default:g=!1}g?this.ca(e):
this.R(e)}};b.prototype.ca=function(e){var g=void 0;try{g=e.then}catch(k){this.K(k);return}"function"==typeof g?this.fa(g,e):this.R(e)};b.prototype.K=function(e){this.U(2,e)};b.prototype.R=function(e){this.U(1,e)};b.prototype.U=function(e,g){if(0!=this.B)throw Error("Cannot settle("+e+", "+g+"): Promise already settled in state"+this.B);this.B=e;this.L=g;this.$()};b.prototype.$=function(){if(null!=this.l){for(var e=0;e<this.l.length;++e)h.M(this.l[e]);this.l=null}};var h=new c;b.prototype.ea=function(e){var g=
this.I();e.D(g.resolve,g.reject)};b.prototype.fa=function(e,g){var k=this.I();try{e.call(g,k.resolve,k.reject)}catch(l){k.reject(l)}};b.prototype.then=function(e,g){function k(n,q){return"function"==typeof n?function(w){try{l(n(w))}catch(B){m(B)}}:q}var l,m,p=new b(function(n,q){l=n;m=q});this.D(k(e,l),k(g,m));return p};b.prototype.catch=function(e){return this.then(void 0,e)};b.prototype.D=function(e,g){function k(){switch(l.B){case 1:e(l.L);break;case 2:g(l.L);break;default:throw Error("Unexpected state: "+
l.B);}}var l=this;null==this.l?h.M(k):this.l.push(k)};b.resolve=d;b.reject=function(e){return new b(function(g,k){k(e)})};b.race=function(e){return new b(function(g,k){for(var l=ba(e),m=l.next();!m.done;m=l.next())d(m.value).D(g,k)})};b.all=function(e){var g=ba(e),k=g.next();return k.done?d([]):new b(function(l,m){function p(w){return function(B){n[w]=B;q--;0==q&&l(n)}}var n=[],q=0;do n.push(void 0),q++,d(k.value).D(p(n.length-1),m),k=g.next();while(!k.done)})};return b});
r("Array.from",function(a){return a?a:function(b,c,d){c=null!=c?c:function(g){return g};var f=[],h="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof h){b=h.call(b);for(var e=0;!(h=b.next()).done;)f.push(c.call(d,h.value,e++))}else for(h=b.length,e=0;e<h;e++)f.push(c.call(d,b[e],e));return f}});
r("String.prototype.codePointAt",function(a){return a?a:function(b){if(null==this)throw new TypeError("The 'this' value for String.prototype.codePointAt must not be null or undefined");var c=this+"";var d=c.length;b=Number(b)||0;if(0<=b&&b<d){b|=0;var f=c.charCodeAt(b);if(55296>f||56319<f||b+1===d)return f;b=c.charCodeAt(b+1);return 56320>b||57343<b?f:1024*(f-55296)+b+9216}}});
function ra(a,b){a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}r("Array.prototype.keys",function(a){return a?a:function(){return ra(this,function(b){return b})}});
var u="#ff6699 #56B4E9 #009E73 #F0E442 #ff9933 #FFBAA3 #9169EC #7B92BE".split(" "),x,A,E,I,L=[],O="",sa=!0,P=[],ta,Q="\u7b46\u9806\u7df4\u7fd2",ua=[],va="zh-TW",R=!0;function wa(a){Array.from(document.querySelectorAll(".preview td")).forEach(function(c){return c.classList.toggle("selected",c.cellIndex==a)});var b=document.querySelector(".gameURL");b&&""!=b.innerHTML&&xa()}
function ya(a){a=a.target;"td"!=a.tagName.toLowerCase()&&"td"==a.parentElement.tagName.toLowerCase()&&(a=a.parentElement);wa(a.cellIndex)}function za(){try{Array.from(document.querySelector(".preview").children).forEach(function(a){return a.remove()}),document.querySelector("#previewBtn").style.display="block",document.querySelector(".resultBlock").style.display="none",document.querySelector("#submitBtn").style.display="none"}catch(a){}}
function xa(){var a=document.getElementById("fileURL");if(a){a=a.value.trim();var b="";/^https:\/\//i.test(a)&&/spreadsheets/.test(a)&&(b=Aa(a));if(""==b)U("\u8acb\u5148\u8f38\u5165 Google \u8a66\u7b97\u8868\u7684\u5171\u7528\u7db2\u5740\u5f8c\uff0c\u518d\u91cd\u8a66\u4e00\u6b21");else{a=(a=a.match(/[#&\?]gid=(\d+)/))&&1<a.length?a[1]:"";var c=window.location.href;c=new URL(c);c.hash="";c.search="";"string"==typeof b&&""!=b.replace(/\s/g,"")&&(c=c.toString()+"?id="+b+(""==a?"":"&gid="+a)+"&autostart=1&");
b=c;(a=document.querySelector(".preview .selected"))&&0<a.cellIndex&&(b+=(/&$/.test(b)?"":"&")+"col="+document.querySelector(".preview .selected").textContent+"&");try{document.querySelector(".gameURL").innerHTML=b}catch(d){console.log(d)}if(a=document.querySelector(".gameQRcode"))c="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data="+encodeURIComponent(b),a.innerHTML='<a href="'+b+'" target="_blank"><img src="'+c+'"/></a>';try{document.querySelector(".resultBlock").style.display="block"}catch(d){}}}}
function Ba(a,b){var c=document.createElement("script");c.setAttribute("type","text/javascript");c.setAttribute("charset","utf-8");c.setAttribute("src",a);c.onload=c.onreadystatechange=function(){c.readyState&&"loaded"!==c.readyState&&"complete"!==c.readyState||(c.onload=c.onreadystatechange=null,document.getElementsByTagName("head")[0].removeChild(c),b())};c.onerror=function(){c.onerror=null;document.getElementsByTagName("head")[0].removeChild(c);"function"==typeof b&&b()};a=document.getElementsByTagName("head")[0];
a.insertBefore(c,a.firstChild)}function V(a){return"string"==typeof a?a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"):a}
function Ca(a,b){var c=[];if("number"!=typeof b||0>b)b=0;if("string"==typeof a&&""!=a.replace(/\s/g,"")){a=a.split("~");if("undefined"!=typeof a&&null!=a){var d=0;do""==a[d]?a.splice(d,1):d++;while(d<a.length)}if(b<a.length&&(a=a[b],a=a.replace(/[^0-9\-,;]/g,""),""!=a))for(b=a.split(";"),a=0;a<b.length;a++){d=b[a].split(",");for(var f=0;f<d.length;f++)if(0<d[f].length){"undefined"==typeof c[a]&&(c[a]=[]);var h=d[f].match(/(\d+)-(\d+)/);if(null!=h&&3<=h.length){var e=parseInt(h[1]);h=parseInt(h[2]);
if(e>h){var g=h;h=e;e=g}for(;e<=h;e++)c[a].push(e)}else e=parseInt(d[f]),isNaN(e)||c[a].push(e)}}}return c}function Ea(a){if(window.ActiveXObject){var b=new ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a)}else b=(new DOMParser).parseFromString(a,"text/xml");return b}
function Fa(a){for(var b=[],c=[],d=0,f=a.getElementsByTagName("Stroke"),h=0;h<f.length;h++)if(1==f[h].nodeType){b[d]=[];c[d]=[];for(var e=f[h].childNodes,g=0,k=0,l=0;l<e.length;l++)if(1==e[l].nodeType)if("Outline"==e[l].nodeName)for(var m=e[l].childNodes,p=0;p<m.length;p++)1==m[p].nodeType&&(b[d][g]=m[p],g++);else if("Track"==e[l].nodeName)for(c[d][k]=[],m=e[l].childNodes,p=0;p<m.length;p++)1==m[p].nodeType&&(c[d][k]=m[p],k++);d++}d=a.getElementsByTagName("Word")[0].getAttribute("unicode");"string"==
typeof d&&b&&c&&("\u61c2"==d&&32==b.length&&32==c.length?(b.splice(16),c.splice(16),console.log("\u522a\u9664-\u61c2-16\u756b\u5f8c\u591a\u51fa\u768416\u7b46\u8cc7\u6599")):"\u8d10"==d?(d=b[11].splice(0),b[11]=b[12].splice(0),b[12]=d,d=c[11].splice(0),c[11]=c[12].splice(0),c[12]=d,console.log("\u4ea4\u63db-\u8d10-\u768412, 13 \u756b")):"\u69bb"==d&&15==b.length&&15==c.length?(b.splice(14,1),c.splice(14,1),console.log("\u522a\u9664-\u69bb-\u591a\u51fa\u7684\u7b2c15\u7b46\u8cc7\u6599")):"\u779e"==d&&
17==b.length&&17==c.length?(b.splice(16,1),c.splice(16,1),console.log("\u522a\u9664-\u779e-\u591a\u51fa\u7684\u7b2c17\u7b46\u8cc7\u6599")):"\u6170"==d&&18==b.length&&18==c.length?(b.splice(15),c.splice(15),console.log("\u522a\u9664-\u6170-15\u756b\u5f8c\u591a\u51fa\u76843\u7b46\u8cc7\u6599")):"\u53eb"==d&&c[4]&&3==c[4].length?(d=c[4][1],c[4][1]=c[4][2],c[4][2]=d,console.log("\u4ea4\u63db-\u53eb-5\u756b\u7684\u6b65\u9a5f2, 3")):"\u554a"==d&&c[8]&&5==c[8].length&&(d=c[8][3],c[8][3]=c[8][4],c[8][4]=
d,console.log("\u4ea4\u63db-\u554a-9\u756b\u7684\u6b65\u9a5f4, 5")));d={};d.V=b;d.o=c;d.ga=a.getElementsByTagName("Word")[0].getAttribute("sound");d.G=a.getElementsByTagName("Word")[0].getAttribute("parts");return d}
function Ga(a,b){var c=0,d=0;if("undefined"!=typeof a&&null!=a){"number"!=typeof c&&(c=0);"number"!=typeof d&&(d=0);"number"==typeof b&&(b=[b]);for(var f="",h=0;h<b.length;h++){for(var e=a[b[h]-1],g=0;g<e.length;g++){var k=e[g];switch(k.nodeName){case "MoveTo":var l=Number(k.getAttribute("x"))+c;var m=Number(k.getAttribute("y"))+d;f+=" M"+l+" "+m;break;case "LineTo":l=Number(k.getAttribute("x"))+c;m=Number(k.getAttribute("y"))+d;f+=" L"+l+" "+m;break;case "QuadTo":l=Number(k.getAttribute("x1"))+c;
m=Number(k.getAttribute("y1"))+d;var p=Number(k.getAttribute("x2"))+c;var n=Number(k.getAttribute("y2"))+d;f+=" Q"+l+" "+m+" "+p+" "+n;break;case "CubicTo":l=Number(k.getAttribute("x1"))+c;m=Number(k.getAttribute("y1"))+d;p=Number(k.getAttribute("x2"))+c;n=Number(k.getAttribute("y2"))+d;var q=Number(k.getAttribute("x3"))+c;k=Number(k.getAttribute("y3"))+d;f+=" C"+l+" "+m+" "+p+" "+n+" "+q+" "+k}}f+=" Z"}return f=f.trim()}}
function Ha(a,b){var c=0,d=!1,f=!1,h=!1;"boolean"!=typeof d&&(d=!0);if("number"!=typeof c||2<c)c=0;"boolean"!=typeof f&&(f=!1);"boolean"!=typeof h&&(h=!0);if(b||"undefined"!=typeof window.localStorage[a]&&window.localStorage[a].match(/<stroke>/i)){b||(b=Fa(Ea(window.localStorage[a])));var e=b.o.length;"string"!=typeof b.G&&(b.G="1-"+e);c=Ca(b.G,c);var g=0,k=0;if("undefined"!=typeof c&&null!=c&&0<c.length){do{var l=0;do 0<c[k][l]&&c[k][l]<=e?(g++,l++):c[k].splice(l,1);while(0<c[k].length&&l<c[k].length);
0<c[k].length?k++:c.splice(k,1)}while(0<c.length&&k<c.length)}if(1>g||g>e)c=Ca("1-"+e);else if(g<e){g={};for(k=0;k<e;k++)g[k+1]=k+1;for(k in c)for(l in c[k])delete g[c[k][l]];0<Object.values(g).length&&c.push(Object.values(g))}e='<svg id="'+a+'" viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">\n';for(k=0;k<c.length;k++){e+='<g fill="'+u[k%u.length]+'" fill-opacity="1" stroke="#000000" stroke-width="0" stroke-linejoin="round" stroke-opacity="0">';if(d)g=Ga(b.V,c[k]),e+='<path d="'+g+'" />';
else for(e+="\n",l=0;l<c[k].length;l++){var m=c[k][l];g=Ga(b.V,m);e+='<path d="'+g+'" id="t'+m+'" />\n'}e+="</g>\n"}if(f){d=e;f=b;var p,n;"number"!=typeof p&&(p=0);"number"!=typeof n&&(n=0);l="";if(f||"undefined"!=typeof window.localStorage[a]&&window.localStorage[a].match(/<stroke>/i))for(f||(f=Fa(Ea(window.localStorage[a]))),c=f.o.length,k=0;k<c;k++)g=f.o[k][0],e=Number(g.getAttribute("x"))+p,g=Number(g.getAttribute("y"))+n,l+='<text class="number" style="font-size:100px;font-style:bold;" x="'+
e+'" y="'+g+'">'+(k+1)+"</text>\n";e=d+l}if(h){h=e;var q,w;"number"!=typeof q&&(q=0);"number"!=typeof w&&(w=0);p="";if(b||"undefined"!=typeof window.localStorage[a]&&window.localStorage[a].match(/<stroke>/i)){b||(b=Fa(Ea(window.localStorage[a])));var B=b.o.length;for(a=0;a<B;a++)for(n=0;n<b.o[a].length;n++)f=b.o[a][n],"MoveTo"==f.nodeName&&(d=Number(f.getAttribute("x"))+q,f=Number(f.getAttribute("y"))+w,p+=(0==n?" M":" L")+d+" "+f)}p=p.trim();if(""!=p)var v='<circle cx="0" cy="0" r="120" style="fill:#ff0000a0;"><animateMotion begin="0s" dur="'+
((15>B?10>B?"5s":"8s":"10s")+'" path="'+p+'"  repeatCount="indefinite" /></circle>');e=h+("\n"+v+"\n")}return e+"</svg>\n"}return""}function Ia(a){var b,c,d;return pa(function(f){switch(f.g){case 1:return b="",c="https://stroke-order.learningweb.moe.edu.tw/provideStrokeInfo.do?ucs="+a.codePointAt(0).toString(16).toUpperCase(),f.F=2,ia(f,fetch(c),4);case 4:return d=f.s,ia(f,d.text(),5);case 5:b=f.s;f.g=3;f.F=0;break;case 2:f.F=0,f.j=null,b="";case 3:return f.return(b)}})}
function Ja(a){var b,c,d,f;return pa(function(h){if(1==h.g)return"string"!=typeof a&&(a="\u96c4"),b=null,ia(h,Ia(a),2);d=h.s;"string"==typeof d&&0<d.length&&d.match(/<Stroke>/i)&&(b=Fa(Ea(d)),f=new RegExp(V(a)+"\\t([^\\t]+)\\t([^\\t]+)\\t([^\\n]*)\n*"),(c=window.stroke_parts_data.match(f))&&3<c.length&&(b.ga="/sound/"+(/\.m4a/.test(c[2])?c[2]:c[2]+".mp3"),b.G=c[3]));return h.return(b)})}
function Ka(){var a=La;Ba("https://gsyan888.github.io/html5_fun/html5_stroke_parts/stroke_parts_data.js",function(){"undefined"!=typeof window.stroke_parts_data&&null!=window.stroke_parts_data&&(window.stroke_parts_data=window.stroke_parts_data.trim().replace(/\r/g,"\n").replace(/\n+/g,"\n"));"function"==typeof a&&a()})}
function Ma(a){Ba("https://gsyan888.github.io/html5_fun/html5_stroke_parts/stroke_component.js",function(){"string"==typeof window.stroke_component&&(window.stroke_component=window.stroke_component.trim().replace(/\r/g,"\n").replace(/\n+/g,"\n"));"function"==typeof a&&a()})}function W(a,b){a=document.createElementNS("http://www.w3.org/2000/svg",a);if(b)for(var c=Object.keys(b),d=0;d<c.length;d++){var f=c[d];a.setAttribute(f,b[f])}return a}
function Na(a,b){a=a.getBoundingClientRect().toJSON();b=b.getBoundingClientRect().toJSON();a.left-=.1*a.width;a.right+=.1*a.width;a.top-=.1*a.height;a.bottom+=.1*a.height;return a&&b?b.left&&b.right&&b.top&&b.bottom?b.left>=a.left&&b.right<=a.right&&b.top>=a.top&&b.bottom<=a.bottom:b.x>=a.left&&b.x<=a.right&&b.y>=a.top&&b.y<=a.bottom:!1}
function Oa(a,b){if(b||"function"!=typeof AudioContext)return b=document.createElement("audio"),b.preload=!0,b.loop=!1,b.src=a,b;var c=new AudioContext,d=new XMLHttpRequest;d.open("GET",a);d.responseType="arraybuffer";d.onload=function(){c.decodeAudioData(d.response,function(f){c.O=f})};d.send();return c}
function Pa(a){if("undefined"!=typeof a&&null!=a)if("undefined"==typeof a.O&&"undefined"!=typeof a.play)a.load(),a&&0<a.currentTime&&!a.paused&&!a.ended&&2<a.readyState||a.play();else if(!(a&&0<a.currentTime&&!a.paused&&!a.ended&&2<a.readyState)){var b=a.createBufferSource();b.buffer=a.O;b.connect(a.destination);b.start()}}
function Qa(){if("undefined"==typeof x||null==x)x=Oa("https://gsyan888.github.io/html5_fun/assets/sound-ding-dong-ding-dong.mp3");if("undefined"==typeof A||null==A)A=Oa("https://gsyan888.github.io/html5_fun/html5_wheel/assets/sound_spin.mp3");if("undefined"==typeof E||null==E)E=Oa("https://gsyan888.github.io/html5_fun/assets/sound-coin.mp3")}
function Ra(a){var b="zh-TW";"string"!=typeof b&&(b="en-US");if(!/https:\/\//.test(a)){a=a.replace(/\.tts$/,"");/\.(\w{2}\-\w{2})$/.test(a)||(a+="."+b);var c=b="";/\.(\w{2}\-\w{2})$/.test(a)&&(a=window.RegExp.leftContext,c=window.RegExp.lastParen);isNaN(1)||(b="https://translate.google.com/translate_tts?ie=UTF-8&tl=${tts_language}&client=tw-ob&ttsspeed=${tts_speed}&q=".replace(/\$\{tts_language\}/i,""==c?"zh-TW":c),b=b.replace(/\$\{tts_speed\}/i,1),b+=encodeURIComponent(a));a=b}"undefined"==typeof I||
null==I?I=Oa(a,!0):I.src=a;I.ja=[];Pa(I)}
function Sa(){function a(e){var g=document.getElementById("practiceSVG").getScreenCTM();if(e.touches){for(var k=e.changedTouches[0].identifier,l=-1,m=0;m<e.touches.length;m++)if(e.touches[m].identifier==k){l=m;break}0>l&&(l=0);e=e.touches[l]}return{x:(e.clientX-g.e)/g.a,y:(e.clientY-g.f)/g.d}}function b(e){var g=-1;if("undefined"!=typeof e.changedTouches&&null!=e.changedTouches&&0<e.changedTouches.length){e=e.changedTouches[0].identifier;for(var k=0;k<h.length;k++)null!=h[k].id&&h[k].id==e&&(g=k)}else g=
0;return g}L=[];var c=document.querySelector("#gameWrapper"),d=document.querySelector("#practice");d||(d=document.createElement("div"),d.id="practice",document.body.appendChild(d));var f=document.querySelector("#practiceSVG");if(f)try{Array.from(f.children).forEach(function(e){return e.remove()})}catch(e){}else f=W("svg",{ma:"0 0 2048 2048"}),f.setAttribute("id","practiceSVG"),f.setAttribute("width","100%"),f.setAttribute("height","100%"),d.appendChild(f);if("undefined"!=typeof penDown)try{f.removeEventListener("mousedown",
penDown)}catch(e){}if("undefined"!=typeof penMove)try{f.removeEventListener("mousemove",penMove)}catch(e){}if("undefined"!=typeof penUp)try{f.removeEventListener("mouseup",penUp)}catch(e){}if("undefined"!=typeof penUp)try{f.removeEventListener("mouseleave",penUp)}catch(e){}if("undefined"!=typeof penDown)try{f.removeEventListener("touchstart",penDown)}catch(e){}if("undefined"!=typeof penMove)try{f.removeEventListener("touchmove",penMove)}catch(e){}if("undefined"!=typeof penUp)try{f.removeEventListener("touchend",
penUp)}catch(e){}if("undefined"!=typeof penUp)try{f.removeEventListener("touchleave",penUp)}catch(e){}if("undefined"!=typeof penUp)try{f.removeEventListener("touchcancel",penUp)}catch(e){}var h=[];penDown=function(e){Qa();var g=e.target;if("path"==g.tagName||g.classList.contains("pathBg")||g.classList.contains("wordNG")){e.preventDefault();e.stopPropagation();var k={};"undefined"!=typeof e.changedTouches&&null!=e.changedTouches&&0<e.changedTouches.length&&(k.id=e.changedTouches[0].identifier);k.target=
e.target;k.position=a(e);h.push(k);e=g.parentElement.getBBox();e=W("rect",{id:"tempRect",width:e.width,height:e.height,x:e.x,y:e.y,style:"fill:#ffffff80;stroke:#0000ff;stroke-width:4;stroke-opacity:0.35"});g.parentElement.appendChild(e);if("g"==g.parentElement.tagName){g=g.parentElement;e=g.parentElement;k=[];for(var l=e.children.length-1;0<=l;l--){var m=e.children[l];if(m==g)break;else k.push(m),e.removeChild(m)}for(l=k.length-1;0<=l;l--)e.insertBefore(k[l],g)}}};penMove=function(e){e.preventDefault();
e.stopPropagation();var g=b(e),k=h[g];if("undefined"!=typeof k&&null!=k){var l=a(e);e=k.target.parentElement;var m=e.getAttribute("transform"),p;m&&(p=m.match(/translate\s*\(\s*([^\)]+)\s*\)/i))?(p=p[1].trim().split(/\s+/),m=2==p.length?{x:Number(p[0]),y:Number(p[1])}:{x:0,y:0}):m={x:0,y:0};e.setAttribute("transform","translate("+(m.x+l.x-k.position.x)+" "+(m.y+l.y-k.position.y)+")");h[g].position=l}};penUp=function(e){var g=document.querySelector("#tempRect");g&&g.remove();e=b(e);0<=e&&h.splice(e,
1)};f.addEventListener("mousedown",penDown);f.addEventListener("mousemove",penMove);f.addEventListener("mouseup",penUp);f.addEventListener("mouseleave",penUp);f.addEventListener("touchstart",penDown);f.addEventListener("touchmove",penMove);f.addEventListener("touchend",penUp);d=document.querySelector("#nextBtn");if("undefined"==typeof d||null==d)d=document.createElement("button"),d.setAttribute("id","nextBtn"),d.setAttribute("class","circleBtn nextBtn hidden"),d.setAttribute("onclick","btnSleep(this, 500);newGame();"),
d.innerHTML="<label>\u4e0b\u4e00\u984c</label>",c.appendChild(d),d=document.createElement("button"),d.setAttribute("class","circleBtn checkBtn hidden"),d.setAttribute("onclick","btnSleep(this, 500);checkAnswer();"),d.innerHTML="<label>\u9001\u51fa<br>\u7b54\u6848</label>",c.appendChild(d),d=document.createElement("button"),d.setAttribute("class","roundBtn skipBtn hidden"),d.setAttribute("onclick","btnSleep(this, 500);skipQuestion();"),d.innerHTML="<label>\u7a0d\u5f8c\u4f5c\u7b54</label>",c.appendChild(d),
d=document.createElement("button"),d.setAttribute("class","roundBtn randomBtn hidden"),d.setAttribute("onclick","randomPosition();"),d.innerHTML="<label>\u90e8\u4ef6\u91cd\u6392</label>",c.appendChild(d),"1"==X("debug")&&(d=document.createElement("button"),d.setAttribute("class","roundBtn showAnsBtn"),d.setAttribute("onclick","showAnswer();"),d.innerHTML="<label>\u986f\u793a\u7b54\u6848</label>",c.appendChild(d));d=c.querySelector(".message");if("undefined"==typeof d||null==d)d=document.createElement("div"),
d.setAttribute("class","message"),c.appendChild(d);d.setAttribute("style","opacity:0;")}function Ta(a){var b=0,c=document.querySelector("#practiceSVG");c&&(b=Math.floor((c.viewBox.baseVal.width-2048*Q.length-40*(Q.length-1))/2)+2088*a);return{x:b,y:1024}}
function Ua(){var a,b=document.querySelector("#practiceSVG");if(b)for(var c=0;c<b.children.length;c++){var d=b.children[c],f=d.getAttribute("id");"g"==d.tagName&&"string"==typeof f&&(a=f.match(/([^-]+)-(\d+)-(\d+)/))&&(f=Ta(Number(a[2])),d.setAttribute("transform","translate("+f.x+" "+f.y+")"))}}
function Va(){var a=document.querySelector("#practiceSVG");if(a)for(var b=0;b<Q.length;b++){var c=Ta(b);c=W("g",{transform:"translate("+c.x+" "+c.y+")","stroke-width":3});var d="";d+='<rect width="2048" height="2048" fill="none" stroke="green" rx="150" ry="150" />\n';d+='<line x1="0" x2="2048" y1="1024" y2="1024" stroke="red" stroke-dasharray="50" />\n';d+='<line y1="0" y2="2048" x1="1024" x2="1024" stroke="red" stroke-dasharray="50" />\n';c.innerHTML=d;a.appendChild(c)}}
function Wa(a){var b,c,d,f,h,e,g,k,l,m,p,n,q,w,B,v,t,z,C,F;pa(function(K){if(1==K.g){if(!(0<P.length)){"function"==typeof a&&(Xa(),a());K.g=0;return}P.length==Q.length&&(window.J=Array.from({length:Ya(Q)},function(G,y){return y}));b=Math.floor(Math.random()*P.length);c=P[b];P.splice(b,1);d=Q[c];return ia(K,Ja(d),3)}f=K.s;h=Ha(d,f);e=new DOMParser;g=e.parseFromString(h,"text/html");k=Za(d);l=document.querySelector("#practiceSVG");m=l.viewBox.baseVal;p=2048*c;n="translate("+p+" 1024)";q=g.querySelectorAll("g");
0==q.length&&(w=W("g"),B=W("text",{"font-size":1679,"class":"wordNG",style:"pointer-events:all;",x:1024,y:1024,"dominant-baseline":"central","text-anchor":"middle"}),B.innerHTML=d,w.appendChild(B),q=[w]);for(v=0;v<q.length;v++)q[v].setAttribute("id",d+"-"+c+"-"+v),q[v].setAttribute("transform",n),l.appendChild(q[v]),Array.from(q[v].querySelectorAll("path")).forEach(function(G){var y=G.getBBox();y=ba([y.x,y.y,y.width,y.height]);var M=y.next().value,N=y.next().value,H=y.next().value,D=y.next().value;
y=(500>H?1.5:1351.68>H?1:.75)*H/2;var Da=(500>D?1.5:1351.68>D?1:.75)*D/2;M+=H/2;N+=D/2;H="fill:#ffffff;fill-opacity:0.001; stroke:none;stroke-opacity:0;";"1"==X("debug")&&(H="fill:#ffff00;fill-opacity:0.1; stroke:none;stroke-opacity:0;");y=W("ellipse",{"class":"pathBg",ha:M,ia:N,ka:y,la:Da,style:H});G=G.parentElement;G.insertBefore(y,G.children[0])}),k&&k[v]&&q[v].setAttribute("cns",k[v]),t=q[v].getBBox(),Ya(Q),b=Math.floor(Math.random()*window.J.length),z=window.J[b],window.J.splice(b,1),C=m.width/
2-t.width/2-t.x,F=m.height/2-t.height/2-t.y,q[v].setAttribute("transform","translate("+C+" "+F+")"),q[v].setAttribute("fill",u[z%u.length]);Wa(a);K.g=0})}
function Xa(){var a=document.querySelector("#practiceSVG");if(a){var b=a.viewBox.baseVal,c=b.width/Ya(Q),d=Array.from({length:Ya(Q)},function(p,n){return n});a=a.querySelectorAll("g");for(var f=0;f<a.length;f++){var h=a[f];if(/[^-]+-\d+-\d+/.test(h.getAttribute("id"))){var e=h.getBBox(),g=Math.floor(Math.random()*d.length),k=d[g],l=k*c-e.x;l=0>l-e.width/2?e.width/2-e.x:l-e.width/2;l+e.width+2*e.x>b.width&&(l=b.width-e.width-e.x-50);var m=2048*(1-Math.floor(3*Math.random()))/5-e.y-e.height/2;1024<
m+e.y+e.height&&(m=974-e.height-e.y);d.splice(g,1);h.setAttribute("transform","translate("+l+" "+m+")");h.setAttribute("fill",u[k%u.length])}}$a()}}function Ya(a){for(var b=0,c=0;c<a.length;c++){var d=void 0;var f="",h=new RegExp(V(a[c])+"\\t([^\\t]+)\\t([^\\t]+)\\t([^\\n]*)\n*");(d=window.stroke_parts_data.match(h))&&3<d.length&&(f=d[3]);d=f;""!==d?b+=Ca(d,0).length:b++}return b}
function Za(a){var b=[],c;if("undefined"==typeof window.stroke_component||null==window.stroke_component)Ma();else{var d=new RegExp(V(a)+"\\t([^\\n]*)\n*");(c=window.stroke_component.match(d))&&2<=c.length?b=c[1].trim().split(";")[0].split(","):b.push(a)}return b}
function ab(a){var b=Q;"string"==typeof b&&(b=Array.from(b));var c="";b.forEach(function(d){return c+=(""==c?"":" AND")+" A LIKE '%"+d+"%'"});bb("https://docs.google.com/spreadsheets/d/1gXpIr34zH65D50td6vnuKbM4yy1WPNQTbReDguCy5lY/edit?usp=sharing","SELECT * WHERE "+c,!0,!0,function(d){var f=[];if("undefined"!=typeof d&&null!=d&&"string"==typeof d.status&&"ok"==d.status){var h=d.table;if("undefined"!=typeof h.rows&&null!=h.rows&&1<h.rows.length&&(d=d.table.rows.filter(function(e){return e.c&&e.c[0].v.length==
b.length}),1<d.length))for("string"!=typeof b&&(b=b.join("")),h=0;h<d.length;h++)d[h].c[0].v!=b&&f.push(d[h].c[0].v.trim())}"function"==typeof a?a(f):console.log(JSON.stringify(f))})}function cb(a){var b,c={x:0,y:0};(a=a.getAttribute("transform"))&&(b=a.match(/translate\s*\(([^\)]+)\)/i))&&(b=b[1].split(/\s+/))&&2==b.length&&(c.x=Number(b[0]),c.y=Number(b[1]));return c}
function db(){var a=[],b,c=document.querySelector("#practiceSVG");if(c){for(var d=0;d<Q.length;d++)a[d]={},a[d].a=[],a[d].w={},a[d].cns=[];for(d=Q.length;d<c.children.length;d++){var f=c.children[d],h=f.getAttribute("id");if("g"==f.tagName&&"string"==typeof h&&(b=h.match(/([^-]+)-(\d+)-(\d+)/))){var e=b[1];h=f.getAttribute("cns");for(var g=0;g<a.length;g++)if(Na(c.children[g],f)){a[g].a.push(f);a[g].cns.push(h);null==a[g].w[e]?a[g].w[e]=1:a[g].w[e]++;break}}}b=[];c=Q.slice();for(d=0;d<a.length;d++){f=
a[d].cns.length;e=Object.keys(a[d].w);for(g=0;g<e.length;g++)if(h=Za(e[g]),h.length!=f)delete a[d].w[e[g]];else{for(var k=0;k<f&&0<h.length;k++)for(var l=0;l<h.length;l++)if(h[l]==a[d].cns[k]){h.splice(l,1);break}0<h.length&&delete a[d].w[e[g]]}h=Object.keys(a[d].w).length;if(0==h)b.push(d),console.log("NG: ",d,a[d]);else if(1==h)for(k=0;k<c.length;k++)if(c[k]==Object.keys(a[d].w)[0]){c.splice(k,1);break}}for(d=0;d<b.length;d++)for(f=a[b[d]].cns.length,k=0;k<c.length;k++)if(e=c[k],h=Za(e),h.length==
f){for(g=0;g<f&&0<h.length;g++)for(l=0;l<h.length;l++)if(h[l]==a[b[d]].cns[g]){h.splice(l,1);break}if(0==h.length){a[b[d]].w[e]=f;break}}}return a}
function eb(){for(var a="",b=db(),c=b.length-1,d=0;d<=c;d++){var f=b[d],h=Object.keys(f.w);h.sort(function(p,n){return f.w[p]-f.w[n]});for(var e=0;e<h.length;e++){var g=h[e],k=Za(g);if(f.cns.length==k.length){for(var l=0;l<f.cns.length&&0<k.length;l++)for(var m=0;m<k.length;m++)if(f.cns[l]==k[m]){k.splice(m,1);break}if(0==k.length){a+=g;break}}}}return{term:a,rect:b}}
function fb(a){function b(t,z){var C=null;if(t&&t.a&&1<t.a.length&&"string"==typeof z){t.a=t.a.sort(function(Da,tb){return d(tb)-d(Da)});for(var F=cb(t.a[0]),K=0;K<t.a.length;K++){var G=t.a[K],y=G.getAttribute("id"),M=G.getAttribute("cns"),N=y.match(/([^-]+)-(\d+)-(\d+)/)[1],H=!0;M=p.querySelectorAll('g[id*="'+z+'"][cns="'+M+'"]');if(N==z){var D=cb(G);204.8>=Math.abs(D.x-F.x)&&204.8>=Math.abs(D.y-F.y)&&(H=!1)}if(H&&0<M.length)for(N=0;N<M.length;N++)if(D=M[N],D.getAttribute("id")!=y&&(D=c(G,D),204.8>=
Math.abs(D.x-F.x)&&204.8>=Math.abs(D.y-F.y))){H=!1;break}if(H){C=G;break}}}return C}function c(t,z){var C=z.getBBox(),F=t.getBBox();z=F.x-C.x+(F.width-C.width)/2;C=F.y-C.y+(F.height-C.height)/2;t=cb(t);t.x+=z;t.y+=C;return t}function d(t){t=t.getBBox();return t.width*t.height}function f(t){if(t){var z=t.getBBox();z=W("rect",{"class":"hintRect",width:z.width,height:z.height,x:z.x,y:z.y,style:"fill:#ffff00;fill-opacity:0.5;stroke:#ff0000;stroke-width:20;stroke-opacity:0.25"});t.insertBefore(z,t.children[0])}else(t=
document.querySelectorAll(".hintRect"))&&Array.from(t).forEach(function(C){return C.remove()})}var h=!0,e=null,g=0,k=0,l=[];if("string"==typeof a){var m=("string"==typeof Q?Q:Q.join("")).trim();a=a.trim();if(a.length>=m.length)l=new RegExp(V(m)),l.test(a)||("function"==typeof gb?(m=gb(m),a=gb(a),l=new RegExp(V(m)),l.test(a)||(h=!1)):h=!1);else return!1}else{Qa();for(m=0;m<Q.length;m++)l[m]={},l[m].q=Za(Q[m]),l[m].a=[],g+=l[m].q.length;var p=document.querySelector("#practiceSVG");if(p)for(m=0;m<p.children.length;m++){var n=
p.children[m],q=n.getAttribute("id");if("g"==n.tagName&&"string"==typeof q&&q.match(/([^-]+)-(\d+)-(\d+)/)){q=n.getAttribute("cns");for(var w=0;w<l.length;w++)if(Na(p.children[w],n)){l[w].a.push(n);k++;break}}}for(m=0;m<l.length;m++){n=l[m];if(n.a.length!=n.q.length){h=!1;break}var B=n.q.slice(0);for(w=0;w<n.a.length;w++){q=n.a[w].getAttribute("cns");for(var v=0;v<B.length;v++)if(q==B[v]){B.splice(v,1);break}}if(0<B.length){h=!1;break}}if(h)for(m=0;m<l.length;m++)if(n=l[m],q=b(n,Q[m])){f(q);setTimeout(function(){f()},
250);U("\u52a0\u6cb9<br>\u7b2c "+(m+1)+" \u500b\u5b57\u518d\u6392\u597d\u4e00\u9ede","#ff6699a0",.75);"undefined"!=typeof A&&null!=A&&Pa(A);return}}if(h||"string"==typeof a)hb(h,k,g,e);else if(a=eb(),Array.from(a.term).length==Q.length){console.log("search dic: "+a.term);U("\u5b57\u62fc\u5c0d\u4e86\uff0c\u8a5e\u4e0d\u540c<br>\uff5e\u67e5\u5b57\u5178\u4e2d\uff0c\u8acb\u7a0d\u5019\uff5e","#FF94B8",2);document.querySelector(".checkBtn").enable=!1;e="";if(0<ua.length)for(m=0;m<ua.length;m++)if(a.term==
ua[m]){e=a.term;break}if(""!=e)for(m=0;m<a.rect.length;m++)if(n=a.rect[m],q=b(n,Object.keys(a.rect[m].w)[0])){f(q);setTimeout(function(){f()},250);U("\u52a0\u6cb9<br>\u7b2c "+(m+1)+" \u500b\u5b57\u518d\u6392\u597d\u4e00\u9ede","#ff6699a0",.75);"undefined"!=typeof A&&null!=A&&Pa(A);return}hb(""!=e,k,g,e)}else hb(h,k,g,e);return h}
function hb(a,b,c,d){var f="";if(a){Ua();a=100;b="green";c=1.5;0==L.length?(f="\u5df2\u7d93\u5168\u90e8\u6311\u6230\u5b8c\uff5e\u52a05000\u5206",a=5E3,b="#56B4E9",c=3):f="\u606d\u559c\u904e\u95dc!!";U('<span style="color:#99cc33;font-size:1.25em;">\u592a\u68d2\u4e86</span><br>'+f,b,c,function(){var h=document.querySelector("#nextBtn");h&&h.classList.toggle("hidden",!1);ib(Q,d)});"undefined"!=typeof x&&null!=x&&Pa(x);f="";"string"!=typeof Q&&(f=Q.join(""));"string"==typeof d&&""!=d&&(f+=","+d);""!=
f&&Ra(f);f=[".checkBtn",".skipBtn",".randomBtn"];for(b=0;b<f.length;b++)(c=document.querySelector(f[b]))&&c.classList.toggle("hidden",!0);jb(a)}else f=b<c&&"string"!=typeof answerTxt?"\u8acb\u6aa2\u67e5\u90e8\u4ef6\u662f\u5426\u90fd\u5b8c\u6574\u5730\u5728\u65b9\u683c\u5167<br>\u6709 "+(c-b)+" \u500b\u9700\u8981\u8abf\u6574\u4f4d\u7f6e":"\u54e6~ \u54e6~~ \u518d\u8a66\u8a66",U('<span style="color:yellow;font-size:1.25em;">\u52a0\u6cb9</span><br>'+f,"red",3),"undefined"!=typeof A&&null!=A&&Pa(A)}
function kb(a){var b=document.createElement("textarea");b.innerHTML=a;return b.value}
function U(a,b,c,d){c||(c=2);if("undefined"==typeof b||null==b)b="#44AF49";var f=document.querySelector(".message");"hidden"!=getComputedStyle(f).getPropertyValue("visibility")?(f.innerHTML=a,f.style.display="block",f.style["background-color"]=b,f.style.opacity=.75,f.style.transition="opacity "+c+"s ease-out",setTimeout(function(){f.style.opacity=0;"function"==typeof d&&d()},Math.floor(1E3*c))):alert(kb(a).replace(/<br>/g,"\n"))}var Y=1,lb=1;
function mb(a){"boolean"!=typeof a&&(a=!1);if("undefined"!=typeof O&&null!=O&&1<O.length){if("undefined"==typeof L||null==L||0==L.length){var b=O.split(/\n+/).filter(function(h){return""!=h.replace(/\s/g,"")});L=Array.from({length:b.length},function(h,e){return{q:b[e],p:Ya(b[e]),H:!1}});L.sort(function(h,e){return h.p-e.p});ta=L.length;Y=L[0].p;lb=Y+1}var c=L[L.length-1].p;for(var d=[];Y<=c&&0<L.length;)if(d=L.filter(function(h){return h.p>=Y&&h.p<=lb&&!h.H}),0==d.length)Y++,lb++;else if(3<L.filter(function(h){return!h.H}).length&&
3>=d.length)lb++;else break;Y==L[0].p||L[0].H||(a||(U("\u606d\u559c\u5347\u7d1a<br>\u52a0\u767c\u9ede\u6578 1000","blue",2),jb(1E3)),Y=L[0].p);d=0<d.length?d.filter(function(h){return h.p==Y}):L.slice(0);var f=Math.floor(Math.random()*d.length);c=Array.from(d[f].q.trim());L=L.filter(function(h){return h.q!=d[f].q});"function"==typeof nb&&nb(ta-L.length)}return c}
function $a(){var a=document.querySelector("#practiceSVG"),b=Array.from(a.children);b.splice(0,Q.length);b.sort(function(c,d){c=c.getBBox();d=d.getBBox();return d.width*d.height-c.width*c.height});b.forEach(function(c){return c.remove()});b.forEach(function(c){return a.appendChild(c)})}
function ob(){var a=document.querySelector("#practice"),b=document.querySelector("#practiceSVG");if(b&&a&&"undefined"!=typeof Q&&null!=Q){var c=a.getBoundingClientRect();a=c.width/Q.length;c=c.height/2.25;var d=1;a>c&&(d=a/c);b.setAttribute("viewBox","0 0 "+Math.floor(2048*Q.length*d+40*(Q.length+1))+" 2048");b.setAttribute("width","100%");b.setAttribute("height","100%")}}
function pb(a){"boolean"!=typeof a&&(a=!1);Array.from(document.querySelector("#practiceSVG").children).forEach(function(c){return c.remove()});var b=document.querySelector("#nextBtn");b&&b.classList.toggle("hidden",!0);ib();Q=mb(a);"undefined"!=typeof Q&&null!=Q&&0<Q.length&&("string"==typeof Q&&(Q=Array.from(Q.trim())),ab(function(c){ua=c}),ob(),Va(),P=Array.from({length:Q.length},function(c,d){return d}),Wa(function(){$a();for(var c=[".checkBtn",".skipBtn",".randomBtn"],d=0;d<c.length;d++){var f=
document.querySelector(c[d]);f&&f.classList.toggle("hidden",!1)}sa&&(U('<span style="color:#ffff00;font-size:1.25em;">\u958b\u59cb\u95d6\u95dc</span><br>\u8acb\u5c07\u90e8\u4ef6\u62d6\u66f3\u5230\u65b9\u6846\u4e2d\u62fc\u6210\u5b57<br>\u8a9e\u8a5e\u62fc\u597d\u4e86\uff0c\u5c31\u6309 [\u9001\u51fa\u7b54\u6848] \u9215',"orange",3),sa=!1)}))}var Z=null;function qb(){var a=document.getElementById("micButton");a&&(a.style["background-color"]="dodgerblue");Z&&"function"==typeof Z.stop&&Z.stop()}
function rb(){Z.onstart=function(){document.getElementById("micButton").style["background-color"]="Violet";console.log("--------\u8a9e\u97f3\u8fa8\u8b58\u958b\u59cb--------")};Z.onend=function(){var a=document.getElementById("micButton");a.style["background-color"]="DodgerBlue";a.m.innerText="";console.log("========\u8a9e\u97f3\u8fa8\u8b58\u7d50\u675f========")};Z.onresult=function(a){var b=a.resultIndex;a=a.results[b][a.results[b].length-1].transcript;console.log(a);b=/Viole/i.test(document.getElementById("micButton").style["background-color"]);
a&&b&&(b=300,fb(a)?qb():b=1E3,document.getElementById("micButton").m.innerText=a,setTimeout(function(){document.getElementById("micButton").m.innerText=""},b))};Z.onerror=function(a){var b="\u932f\u8aa4\u4ee3\u78bc\u53ca\u8a0a\u606f: ["+a.error+"] ["+a.message+"]";/not-allowed/i.test(a.error)?U("\u7121\u6cd5\u4f7f\u7528\u8a9e\u97f3\u8fa8\u8b58(\u53ef\u80fd\u9700\u8981\u6aa2\u67e5\u9ea5\u514b\u98a8\u8a2d\u5b9a\u3001\u5b89\u5168\u3001\u96b1\u79c1\u8a2d\u5b9a\uff1b\u6216\u662f\u8acb\u63db\u4e00\u7a2e\u700f\u89bd\u5668\u518d\u8a66\u8a66)<br>"+
b):/aborted/i.test(a.error)?/kAFAssistantErrorDomain/i.test(a.message)&&U("\u7121\u6cd5\u4f7f\u7528\u8a9e\u97f3\u8fa8\u8b58(\u7b49\u4e00\u4e0b\uff1b\u6216\u662f\u5148[\u5132\u5b58]\u9032\u5ea6\u3001\u95dc\u9589\u700f\u89bd\u5668\u4e26\u91cd\u958b\u5f8c\u518d[\u8f09\u5165]\u9032\u5ea6\u8a66)<br>"+b):/no\-speech/i.test(a.error)||U("Error<br>"+b)}}
function sb(a){"function"==typeof Qa&&Qa();a.preventDefault();a=document.getElementById("micButton");if("function"==typeof window.SpeechRecognition||"function"==typeof window.webkitSpeechRecognition||"function"==typeof window.S||"function"==typeof window.T){if("undefined"==typeof Z||null==Z)Z=new (window.webkitSpeechRecognition||window.SpeechRecognition||window.S||window.T),Z.continuous=!0,Z.interimResults=!0,Z.lang="zh-TW","string"==typeof va&&""!=va&&(Z.lang=va),Z.interimResults=!0,rb();if("dodgerblue"==
a.style["background-color"].toLowerCase())if((a=document.querySelector(".checkBtn"))&&a.classList.contains("hidden"))U("\u8acb\u5148\u6309\u4e0b\u4e00\u984c<br>\u624d\u80fd\u555f\u52d5\u8a9e\u97f3\u8f38\u5165\u7684\u529f\u80fd","red");else try{Z.start()}catch(b){setTimeout(function(){Z.start()},100)}else try{qb()}catch(b){}}else alert("\u62b1\u6b49~ \u60a8\u7684\u700f\u89bd\u5668\u4e0d\u652f\u63f4\u8a9e\u97f3\u8fa8\u8b58(webkitSpeechRecognition)\u7684\u529f\u80fd"),a.removeEventListener("mousedown",
sb),a.removeEventListener("touchstart",sb),a.remove()}function ub(){var a=document.createElement("script");a.setAttribute("type","text/javascript");a.onload=function(){};a.setAttribute("src","https://gsyan888.github.io/html5_fun/assets/pinyin.js");document.getElementsByTagName("head")[0].appendChild(a)}
function gb(a){var b="";if("string"==typeof pinyinDic&&0<pinyinDic.length)for(var c=0;c<a.length;){var d=a.substr(c++,1);if(/[^a-z|A-Z|0-9|,|\+|\$|\^|\(|\)|\*|\.|\|]/.test(d)){var f=new RegExp(V(d)+"([^,]+)");f=pinyinDic.match(f);d="undefined"!=typeof f&&null!=f?f[1]:d}b+=d}return""==b?a:b}function X(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(window.location.href);return null==a?"":a[1]}
function vb(){var a=X("lang");""!=a&&(va=a);if("function"==typeof window.SpeechRecognition||"function"==typeof window.webkitSpeechRecognition||"function"==typeof window.S||"function"==typeof window.T){if("undefined"!=typeof micButton&&null!=micButton){try{micButton.removeEventListener("mousedown",sb)}catch(b){}try{micButton.removeEventListener("touchstart",sb)}catch(b){}try{micButton.remove()}catch(b){}}setTimeout(function(){var b=document.getElementById("gameWrapper"),c=document.createElement("button");
c.id="micButton";c.setAttribute("class","circleBtn micBtn");c.title="\u6309\u9019\u88e1\u555f\u7528/\u95dc\u9589\u8a9e\u97f3\u8fa8\u8b58";c.innerHTML="MIC";b.appendChild(c);b=document.createTextNode("");c.m=document.createElement("div");c.m.id="speechText";c.m.appendChild(b);c.appendChild(c.m);c.addEventListener("mousedown",sb);c.addEventListener("touchstart",sb);("string"!=typeof pinyinDic||0>=pinyinDic.length)&&ub()},1E3)}}
function Aa(a){var b="";!/^https:\/\//.test(a)&&20<a.length?b=a:/\/d\/([^\/]{20}[^\/]+)\//.test(a)&&(b=window.RegExp.lastParen);return b}function wb(a,b,c){var d=Aa(a),f=a.match(/[#&\?]gid=(\d+)/);f=f&&1<f.length?f[1]:"-1";a="";""!=d&&(a="https://docs.google.com/spreadsheets/d/"+d+"/gviz/tq?tqx=out:json","-1"!=f&&(a+="&gid="+f),"string"==typeof b&&""!=b.replace(/\s/g,"")&&(b=encodeURIComponent(b),a+="&tq="+b),"number"==typeof c&&(a+="&headers="+c));return a}
function xb(a,b){var c=document.createElement("script");"undefined"==typeof window.google&&(window.google={});"undefined"==typeof window.google.visualization&&(window.google.visualization={});"undefined"==typeof window.google.visualization.Query&&(window.google.visualization.Query={});window.google.visualization.Query.setResponse=b;c.setAttribute("type","text/javascript");c.setAttribute("charset","utf-8");c.setAttribute("src",a);c.onload=c.onreadystatechange=function(){c.readyState&&"loaded"!==c.readyState&&
"complete"!==c.readyState||(c.onload=c.onreadystatechange=null,document.getElementsByTagName("head")[0].removeChild(c))};c.onerror=function(){c.onerror=null;document.getElementsByTagName("head")[0].removeChild(c);if("function"==typeof b)b();else{var d="\u7121\u6cd5\u8f09\u5165\u8a2d\u5b9a.",f=document.querySelector(".resultBlock");"undefined"!=typeof f&&null!=f&&(d+="\n\n\u8acb\u78ba\u8a8d\u4e00\u4e0b:\n\n* \u8a66\u7b97\u8868\u5171\u7528\u9023\u7d50\u7684\u7db2\u5740\u662f\u5426\u6b63\u78ba, \n\n* \u662f\u5426\u958b\u653e\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u6aa2\u8996.",
f.style.display="none");setTimeout(function(){alert(d)},100)}};a=document.getElementsByTagName("head")[0];a.insertBefore(c,a.firstChild)}
function bb(a,b,c,d,f){"string"!=typeof a?a="":/^https:\/\//i.test(a)||(a="https://docs.google.com/spreadsheets/d/"+a+"/edit?usp=sharing");"boolean"!=typeof d&&(d=!0);if(/^https:\/\//i.test(a)&&/spreadsheets/.test(a)){var h="",e=null;"boolean"==typeof c&&c&&(e=0);a=wb(a,b,e);xb(a,function(g){if("boolean"==typeof c&&c)"function"==typeof f?f(g):console.log(g);else{if("undefined"!=typeof g&&null!=g&&"string"==typeof g.status&&"ok"==g.status&&"undefined"!=typeof g.table.rows&&null!=g.table.rows&&0<g.table.rows.length){h=
"";var k=-1,l=0,m=g.table.cols;if(0==g.table.parsedNumHeaders)for(var p=g.table.rows[0].c,n=0;n<p.length;n++){var q=g.table.rows[0].c[n].v;if("string"==typeof q&&"\u6210\u8a9e"==q.trim()){k=n;l=1;break}}else for(n=0;n<m.length;n++)if("\u6210\u8a9e"==m[n].label.trim()){k=n;break}0>k&&(k=0,0<g.table.parsedNumHeaders&&(q=g.table.cols[k].label,"string"==typeof q&&""!=q.replace(/\s/g,"")&&(h+=q.trim())));console.log("get @"+k,"from "+l,m);if(0<=k)for(n=l;n<g.table.rows.length;n++)l=g.table.rows[n].c[k],
"undefined"!=typeof l&&null!=l?"string"==typeof l.v&&""!=l.v.replace(/\s/g,"")?h+=l.v.trim()+"\n":d||(h+="\n"):d||(h+="\n")}""!=h?"function"==typeof f?f(h):console.log(h):("undefined"!=typeof g&&null!=g&&"undefined"!=typeof g.table&&console.log(g.table),R=!1,U("\u7121\u6cd5\u8f09\u5165\u984c\u5eab<br>\u8acb\u78ba\u8a8d\u8a66\u7b97\u8868\u4e2d\u7684\u5167\u5bb9\u5f8c\u518d\u8a66","red",10,function(){yb(0)}))}})}else R=!1,U("\u7121\u6cd5\u8f09\u5165\u984c\u5eab<br>\u7db2\u5740\u4f3c\u4e4e\u4e0d\u662f\u8a66\u7b97\u8868\u7684\uff0c\u8acb\u78ba\u8a8d\u5f8c\u518d\u8a66",
"red",10,function(){yb(0)})}function zb(a,b,c,d,f){function h(g){e||(e=g);g=Math.min((g-e)/d,1);a.innerHTML=Math.floor(g*(c-b)+b);1>g?window.requestAnimationFrame(h):"function"==typeof f&&f()}var e=null;window.requestAnimationFrame(h)}function jb(a){function b(){"undefined"!=typeof E&&null!=E&&Pa(E)}var c=document.querySelector(".score");if("number"!=typeof a)c.innerHTML="0",b();else{var d=parseInt(c.innerHTML);zb(c,d,d+a,50>a?500:1E3,function(){b()})}}
function nb(a){var b=document.querySelector(".q-number"),c="^_^";b&&("number"==typeof a&&(c=a+" / "+ta),b.innerHTML=c)}
function ib(a,b){var c=document.querySelector(".dicLink");c&&("undefined"==typeof a||null==a?a="":("string"!=typeof a&&(a=a.join("")),"undefined"==typeof b||null==b?a='<a href="https://pedia.cloud.edu.tw/Entry/Detail?title='+encodeURIComponent(a)+'#" target="_blank">\u67e5\u770b\u6559\u80b2\u96f2-\u6559\u80b2\u767e\u79d1 ['+a+"] \u7684\u89e3\u91cb</a>":(a='\u67e5\u770b\u6559\u80b2\u96f2-\u6559\u80b2\u767e\u79d1\u7684\u89e3\u91cb &gt;&gt; [<a href="https://pedia.cloud.edu.tw/Entry/Detail?title='+(encodeURIComponent(a)+
'#" target="_blank">'+a+"</a>]"),a+='[<a href="https://pedia.cloud.edu.tw/Entry/Detail?title='+encodeURIComponent(b)+'#" target="_blank">'+b+"</a>]")),c.innerHTML=a)}
function yb(a){var b=document.getElementById("HTML5FunWrapper");if("undefined"!=typeof b&&null!=b)if(a)window.scrollTo(0,0),window.onscroll=function(){window.scrollTo(0,0)},document.body.style.overflow="hidden",b.style.visibility="visible";else{b.style.visibility="hidden";window.onscroll=null;document.body.style.overflow="visible";try{"function"==typeof Ab&&Ab(1)}catch(c){}}}
function Bb(){var a=document.querySelector("meta[name=viewport]");if("undefined"==typeof a||null==a)a=document.createElement("meta"),a.name="viewport",document.getElementsByTagName("head").item(0).appendChild(a);var b="initial-scale=1.0,minimum-scale=1,maximum-scale=1.0,user-scalable=no";/android/i.test(navigator.userAgent)&&(b+=",target-densityDpi=device-dpi");a.content=b}
function Cb(){for(var a=null,b=document.getElementsByTagName("meta"),c=0;c<b.length;c++)if("referrer"==b[c].name){a=b[c];break}null==a&&(a=document.createElement("meta"),a.name="referrer",document.getElementsByTagName("head")[0].appendChild(a));a.content="no-referrer"}
function Db(){var a="PARTDLE";if("undefined"==typeof a||null==a)a="\u8f09\u5165\u6a94\u6848\u4e2d";var b=(window.innerWidth&&document.documentElement.clientWidth?Math.min(window.innerWidth,document.documentElement.clientWidth):window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth)/2,c=(window.innerHeight&&document.documentElement.clientHeight?Math.min(window.innerHeight,document.documentElement.clientHeight):window.innerHeight||document.documentElement.clientHeight||
document.getElementsByTagName("body")[0].clientHeight)/2+60,d=document.createElement("div");d.id="loadingLogo";d.setAttribute("class","loading-container");d.style.top=c+window.scrollY+"px";d.style.left=b+"px";d.innerHTML='<div class="loading-logo"><p class="loading-label">'+a+"</p></div>";document.body.appendChild(d);var f=10;R=!0;var h=setInterval(function(){d.style.top=c+window.scrollY+"px";d.style.left=b+"px";var e=document.querySelector(".loading-label");f=10!=f?10:-10;e.style.transform="translate(10px, -24px) rotate("+
f+"deg)";"boolean"!=typeof R||R||(clearInterval(h),d.remove())},100)}
function La(){if("undefined"!=typeof window.stroke_parts_data&&null!=window.stroke_parts_data){document.querySelector(".loading-label").innerHTML="\u8f09\u5165\u984c\u5eab";Sa();var a=X("id"),b=X("gid"),c=X("col"),d="https://docs.google.com/spreadsheets/d/1kBueULlojPOH9E3EZYEUcUAv1HfJm_wULQT1hT2m1nM/edit?usp=sharing";""==a.replace(/\s/g,"")?""!=b&&(d=/gid=/.test(d)?d.replace(/gid=([^&\?#]+)/g,"gid="+b):d+((/\?/.test(d)?"&":"?")+"gid="+b+"#"+b)):d="https://docs.google.com/spreadsheets/d/"+a+"/edit?"+
(""==b?"usp=sharing":"?gid="+b+"#"+b);a=null;""!=c.replace(/\s|[^a-z]/ig,"")&&(a="SELECT "+c.toUpperCase());bb(d,a,!1,!1,function(f){R=!1;O=f.trim();var h=parseInt(X("lesson"));isNaN(h)||(f=O.split(/\n\n+/),0<=h&&h<=f.length&&(O=f[h-1]));sa=!0;pb()});vb()}else setTimeout(function(){R=!1;U("HTML5 FUN \u90e8\u4ef6\u8a2d\u5b9a\u8f09\u5165\u5931\u6557<br>\u8acb\u6aa2\u67e5\u5f8c\u518d\u8a66","red",5,function(){yb(0)})},500)}
function Eb(){function a(){"undefined"!=typeof window.stroke_component&&null!=window.stroke_component?"undefined"==typeof window.stroke_parts_data||null==window.stroke_parts_data?Ka():La():setTimeout(function(){U("CNS \u90e8\u4ef6\u8a2d\u5b9a\u8f09\u5165\u5931\u6557<br>\u8acb\u6aa2\u67e5\u5f8c\u518d\u8a66","red",5,function(){yb(0)});R=!1},500)}document.querySelector(".loading-label").innerHTML="\u8f09\u5165\u8a2d\u5b9a";"undefined"==typeof window.stroke_component||null==window.stroke_component?Ma(a):
a()}function Ab(a){for(var b=3;10>=b;b++)try{document.querySelector("#aswift_"+b).parentElement.parentElement.style.scale=a}catch(c){}}function Fb(){try{"function"==typeof Ab&&Ab(.001)}catch(a){}Bb();Cb();yb(!0);window.scrollTo(0,0);document.querySelector(".debug").innerHTML="";R=!0;Db();Qa();Ra("\u52a0\u6cb9");setTimeout(function(){jb();nb();ib()},100);Eb()}var Gb=X("autostart");"1"!=Gb&&"true"!=Gb||Fb();window.setVisibility=yb;
window.btnSleep=function(a,b){a.disabled=!0;setTimeout(function(){a.disabled=!1},b)};window.newGame=pb;window.checkAnswer=fb;window.skipQuestion=function(){if(0<L.length){var a=Q.join(""),b=Ya(a);L.push({q:a,p:b,H:!0});a=["\u56de\u982d\u898b","\u5f85\u6703\u5152\u898b","See you later"];U("\uff5e"+a[Math.floor(Math.random()*a.length)]+"\uff5e","#00B0F0",.6);pb(!0)}else U("\u8acb\u52c7\u6562\u9762\u5c0d<br>\u9019\u662f\u6700\u5f8c\u4e00\u984c\u4e86","red")};window.randomPosition=Xa;
window.fileURL_onBlurHandler=function(a){var b="";a.value&&/^https:\/\//i.test(a.value)&&/spreadsheets/.test(a.value)&&(b=Aa(a.value));if(""==b)za(),a.value&&""==a.value.replace(/\s/g,"")?za():setTimeout(function(){U("\u8acb\u8f38\u5165 Google \u8a66\u7b97\u8868\u7684\u5171\u7528\u7db2\u5740")},100);else{try{document.querySelector("#previewBtn").style.display="none",document.querySelector("#submitBtn").style.display="block"}catch(c){}bb(a.value,"SELECT * LIMIT 2",!0,!0,function(c){var d="";if("undefined"!=
typeof c&&null!=c&&"string"==typeof c.status&&"ok"==c.status){var f=c.table;if("undefined"!=typeof f.rows&&null!=f.rows&&0<f.rows.length){var h=document.createElement("table");if("undefined"!=typeof f.cols&&null!=f.cols){var e=h.insertRow();f.cols.forEach(function(g){e.insertCell().innerHTML="<b>"+g.id+"</b>"})}f.rows.forEach(function(g){var k=h.insertRow();g.c.forEach(function(l){k.insertCell().innerHTML=l?l.v:"&nbsp;"})});"undefined"!=typeof f.cols&&null!=f.cols&&(e=h.insertRow(),f.cols.forEach(function(){e.insertCell().innerHTML=
"...\u4ee5\u4e0b\u7701\u7565"}));f=document.querySelector(".preview");f.innerHTML="<h3>\u8acb\u9ede\u9078\u60f3\u8981\u4f7f\u7528\u7684\u6b04\u4f4d</h3>";f.appendChild(h);h.onclick=ya;wa(0)}else d="\u5de5\u4f5c\u8868\u6c92\u6709\u8cc7\u6599<br>\u8acb\u78ba\u8a8d\u8a66\u7b97\u8868\u4e2d\u7684\u5167\u5bb9\u5f8c\u518d\u8a66"}else d="\u7121\u6cd5\u8f09\u5165\u984c\u5eab<br>\u8acb\u78ba\u8a8d\u8a66\u7b97\u8868\u4e2d\u7684\u5167\u5bb9\u5f8c\u518d\u8a66";""!=d&&(za(),setTimeout(function(){U(d,"red",10)},
100),console.log("debug",c))})}};window.submitOnClickHandler=xa;
window.copyAndSelectToClipboard=function(a){"string"==typeof a&&(a=document.getElementById(a));if("undefined"!=typeof a&&null!=a){if(/input|textarea/i.test(a.tagName))a.select(),document.execCommand("copy");else{var b=document.createElement("textarea");b.setAttribute("style","width:1;height:1;border:0;");b.textContent=a.textContent;document.body.append(b);b.select();document.execCommand("copy");b.remove();b=null;b=document.createRange();b.selectNode(a);window.getSelection().removeAllRanges();window.getSelection().addRange(b)}setTimeout(function(){window.getSelection().removeAllRanges()},
300)}};window.start=Fb;
