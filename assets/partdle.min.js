function aa(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}}function ba(a){var c="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return c?c.call(a):{next:aa(a)}}var ca="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,d){if(a==Array.prototype||a==Object.prototype)return a;a[c]=d.value;return a};
function da(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var c=0;c<a.length;++c){var d=a[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");}var ea=da(this);function v(a,c){if(c)a:{var d=ea;a=a.split(".");for(var e=0;e<a.length-1;e++){var k=a[e];if(!(k in d))break a;d=d[k]}a=a[a.length-1];e=d[a];c=c(e);c!=e&&null!=c&&ca(d,a,{configurable:!0,writable:!0,value:c})}}
function fa(){this.j=!1;this.g=null;this.h=void 0;this.b=1;this.u=this.l=0;this.i=null}function ha(a){if(a.j)throw new TypeError("Generator is already running");a.j=!0}fa.prototype.m=function(a){this.h=a};function ia(a,c){a.i={H:c,I:!0};a.b=a.l||a.u}fa.prototype.return=function(a){this.i={return:a};this.b=this.u};function ja(a,c,d){a.b=d;return{value:c}}function ka(a){this.b=new fa;this.g=a}
function la(a,c){ha(a.b);var d=a.b.g;if(d)return ma(a,"return"in d?d["return"]:function(e){return{value:e,done:!0}},c,a.b.return);a.b.return(c);return na(a)}function ma(a,c,d,e){try{var k=c.call(a.b.g,d);if(!(k instanceof Object))throw new TypeError("Iterator result "+k+" is not an object");if(!k.done)return a.b.j=!1,k;var m=k.value}catch(f){return a.b.g=null,ia(a.b,f),na(a)}a.b.g=null;e.call(a.b,m);return na(a)}
function na(a){for(;a.b.b;)try{var c=a.g(a.b);if(c)return a.b.j=!1,{value:c.value,done:!1}}catch(d){a.b.h=void 0,ia(a.b,d)}a.b.j=!1;if(a.b.i){c=a.b.i;a.b.i=null;if(c.I)throw c.H;return{value:c.return,done:!0}}return{value:void 0,done:!0}}
function oa(a){this.next=function(c){ha(a.b);a.b.g?c=ma(a,a.b.g.next,c,a.b.m):(a.b.m(c),c=na(a));return c};this.throw=function(c){ha(a.b);a.b.g?c=ma(a,a.b.g["throw"],c,a.b.m):(ia(a.b,c),c=na(a));return c};this.return=function(c){return la(a,c)};this[Symbol.iterator]=function(){return this}}function pa(a){function c(e){return a.next(e)}function d(e){return a.throw(e)}return new Promise(function(e,k){function m(f){f.done?e(f.value):Promise.resolve(f.value).then(c,d).then(m,k)}m(a.next())})}
function qa(a){return pa(new oa(new ka(a)))}v("Symbol",function(a){function c(k){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return new d("jscomp_symbol_"+(k||"")+"_"+e++,k)}function d(k,m){this.b=k;ca(this,"description",{configurable:!0,writable:!0,value:m})}if(a)return a;d.prototype.toString=function(){return this.b};var e=0;return c});
v("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var c="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),d=0;d<c.length;d++){var e=ea[c[d]];"function"===typeof e&&"function"!=typeof e.prototype[a]&&ca(e.prototype,a,{configurable:!0,writable:!0,value:function(){return ra(aa(this))}})}return a});function ra(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}
v("Promise",function(a){function c(f){this.g=0;this.j=void 0;this.b=[];var l=this.h();try{f(l.resolve,l.reject)}catch(n){l.reject(n)}}function d(){this.b=null}function e(f){return f instanceof c?f:new c(function(l){l(f)})}if(a)return a;d.prototype.g=function(f){if(null==this.b){this.b=[];var l=this;this.h(function(){l.j()})}this.b.push(f)};var k=ea.setTimeout;d.prototype.h=function(f){k(f,0)};d.prototype.j=function(){for(;this.b&&this.b.length;){var f=this.b;this.b=[];for(var l=0;l<f.length;++l){var n=
f[l];f[l]=null;try{n()}catch(p){this.i(p)}}}this.b=null};d.prototype.i=function(f){this.h(function(){throw f;})};c.prototype.h=function(){function f(p){return function(q){n||(n=!0,p.call(l,q))}}var l=this,n=!1;return{resolve:f(this.L),reject:f(this.i)}};c.prototype.L=function(f){if(f===this)this.i(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof c)this.F(f);else{a:switch(typeof f){case "object":var l=null!=f;break a;case "function":l=!0;break a;default:l=!1}l?this.J(f):this.l(f)}};
c.prototype.J=function(f){var l=void 0;try{l=f.then}catch(n){this.i(n);return}"function"==typeof l?this.G(l,f):this.l(f)};c.prototype.i=function(f){this.m(2,f)};c.prototype.l=function(f){this.m(1,f)};c.prototype.m=function(f,l){if(0!=this.g)throw Error("Cannot settle("+f+", "+l+"): Promise already settled in state"+this.g);this.g=f;this.j=l;this.u()};c.prototype.u=function(){if(null!=this.b){for(var f=0;f<this.b.length;++f)m.g(this.b[f]);this.b=null}};var m=new d;c.prototype.F=function(f){var l=this.h();
f.s(l.resolve,l.reject)};c.prototype.G=function(f,l){var n=this.h();try{f.call(l,n.resolve,n.reject)}catch(p){n.reject(p)}};c.prototype.then=function(f,l){function n(r,u){return"function"==typeof r?function(z){try{p(r(z))}catch(E){q(E)}}:u}var p,q,t=new c(function(r,u){p=r;q=u});this.s(n(f,p),n(l,q));return t};c.prototype.catch=function(f){return this.then(void 0,f)};c.prototype.s=function(f,l){function n(){switch(p.g){case 1:f(p.j);break;case 2:l(p.j);break;default:throw Error("Unexpected state: "+
p.g);}}var p=this;null==this.b?m.g(n):this.b.push(n)};c.resolve=e;c.reject=function(f){return new c(function(l,n){n(f)})};c.race=function(f){return new c(function(l,n){for(var p=ba(f),q=p.next();!q.done;q=p.next())e(q.value).s(l,n)})};c.all=function(f){var l=ba(f),n=l.next();return n.done?e([]):new c(function(p,q){function t(z){return function(E){r[z]=E;u--;0==u&&p(r)}}var r=[],u=0;do r.push(void 0),u++,e(n.value).s(t(r.length-1),q),n=l.next();while(!n.done)})};return c});
v("Array.from",function(a){return a?a:function(c,d,e){d=null!=d?d:function(l){return l};var k=[],m="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];if("function"==typeof m){c=m.call(c);for(var f=0;!(m=c.next()).done;)k.push(d.call(e,m.value,f++))}else for(m=c.length,f=0;f<m;f++)k.push(d.call(e,c[f],f));return k}});
v("String.prototype.codePointAt",function(a){return a?a:function(c){if(null==this)throw new TypeError("The 'this' value for String.prototype.codePointAt must not be null or undefined");var d=this.length;c=Number(c)||0;if(0<=c&&c<d){c|=0;var e=this.charCodeAt(c);if(55296>e||56319<e||c+1===d)return e;c=this.charCodeAt(c+1);return 56320>c||57343<c?e:1024*(e-55296)+c+9216}}});
function sa(a,c){a instanceof String&&(a+="");var d=0,e={next:function(){if(d<a.length){var k=d++;return{value:c(k,a[k]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e}v("Array.prototype.keys",function(a){return a?a:function(){return sa(this,function(c){return c})}});
var x="#ff6699 #56B4E9 #009E73 #F0E442 #ff9933 #FFBAA3 #9169EC #7B92BE".split(" "),A,D,H,L,N=[],Q="",ta=!0,R=[],ua,S="\u7b46\u9806\u7df4\u7fd2",va=[],wa="zh-TW",T=!0;function xa(a){Array.from(document.querySelectorAll(".preview td")).forEach(function(d){return d.classList.toggle("selected",d.cellIndex==a)});var c=document.querySelector(".gameURL");c&&""!=c.innerHTML&&ya()}
function za(a){a=a.target;"td"!=a.tagName.toLowerCase()&&"td"==a.parentElement.tagName.toLowerCase()&&(a=a.parentElement);xa(a.cellIndex)}function Aa(){try{Array.from(document.querySelector(".preview").children).forEach(function(a){return a.remove()}),document.querySelector("#previewBtn").style.display="block",document.querySelector(".resultBlock").style.display="none",document.querySelector("#submitBtn").style.display="none"}catch(a){}}
function ya(){var a=document.getElementById("fileURL");if(a){a=a.value.trim();var c="";/^https:\/\//i.test(a)&&/spreadsheets/.test(a)&&(c=Ba(a));if(""==c)U("\u8acb\u5148\u8f38\u5165 Google \u8a66\u7b97\u8868\u7684\u5171\u7528\u7db2\u5740\u5f8c\uff0c\u518d\u91cd\u8a66\u4e00\u6b21");else{(a=a.match(/[#&\?]gid=(\d+)/))&&1<a.length?a=a[1]:a="";var d=window.location.href;d=new URL(d);d.hash="";d.search="";d=d.toString();"string"==typeof c&&""!=c.replace(/\s/g,"")&&(d+="?id="+c+(""==a?"":"&gid="+a)+"&autostart=1&");
c=d;(a=document.querySelector(".preview .selected"))&&0<a.cellIndex&&(c+=(/&$/.test(c)?"":"&")+"col="+document.querySelector(".preview .selected").textContent+"&");try{document.querySelector(".gameURL").innerHTML=c}catch(e){console.log(e)}if(a=document.querySelector(".gameQRcode"))d="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data="+encodeURIComponent(c),a.innerHTML='<a href="'+c+'" target="_blank"><img src="'+d+'"/></a>';try{document.querySelector(".resultBlock").style.display="block"}catch(e){}}}}
function Ca(a,c){var d=document.createElement("script");d.setAttribute("type","text/javascript");d.setAttribute("charset","utf-8");d.setAttribute("src",a);d.onload=d.onreadystatechange=function(){d.readyState&&"loaded"!==d.readyState&&"complete"!==d.readyState||(d.onload=d.onreadystatechange=null,document.getElementsByTagName("head")[0].removeChild(d),c())};d.onerror=function(){d.onerror=null;document.getElementsByTagName("head")[0].removeChild(d);"function"==typeof c&&c()};a=document.getElementsByTagName("head")[0];
a.insertBefore(d,a.firstChild)}function V(a){return"string"==typeof a?a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"):a}
function Da(a,c){var d=[];if("number"!=typeof c||0>c)c=0;if("string"==typeof a&&""!=a.replace(/\s/g,"")){a=a.split("~");if("undefined"!=typeof a&&null!=a){var e=0;do""==a[e]?a.splice(e,1):e++;while(e<a.length)}if(c<a.length&&(a=a[c],a=a.replace(/[^0-9\-,;]/g,""),""!=a))for(c=a.split(";"),a=0;a<c.length;a++){e=c[a].split(",");for(var k=0;k<e.length;k++)if(0<e[k].length){"undefined"==typeof d[a]&&(d[a]=[]);var m=e[k].match(/(\d+)-(\d+)/);if(null!=m&&3<=m.length){var f=parseInt(m[1],10);m=parseInt(m[2],
10);if(f>m){var l=m;m=f;f=l}for(;f<=m;f++)d[a].push(f)}else f=parseInt(e[k],10),isNaN(f)||d[a].push(f)}}}return d}function Fa(a){if(window.ActiveXObject){var c=new ActiveXObject("Microsoft.XMLDOM");c.async="false";c.loadXML(a)}else c=(new DOMParser).parseFromString(a,"text/xml");return c}
function Ga(a){for(var c=[],d=[],e=0,k=a.getElementsByTagName("Stroke"),m=0;m<k.length;m++)if(1==k[m].nodeType){c[e]=[];d[e]=[];for(var f=k[m].childNodes,l=0,n=0,p=0;p<f.length;p++)if(1==f[p].nodeType)if("Outline"==f[p].nodeName)for(var q=f[p].childNodes,t=0;t<q.length;t++)1==q[t].nodeType&&(c[e][l]=q[t],l++);else if("Track"==f[p].nodeName)for(d[e][n]=[],q=f[p].childNodes,t=0;t<q.length;t++)1==q[t].nodeType&&(d[e][n]=q[t],n++);e++}e=a.getElementsByTagName("Word")[0].getAttribute("unicode");"string"==
typeof e&&c&&d&&("\u61c2"==e&&32==c.length&&32==d.length?(c.splice(16),d.splice(16),console.log("\u522a\u9664-\u61c2-16\u756b\u5f8c\u591a\u51fa\u768416\u7b46\u8cc7\u6599")):"\u8d10"==e?(e=c[11].splice(0),c[11]=c[12].splice(0),c[12]=e,e=d[11].splice(0),d[11]=d[12].splice(0),d[12]=e,console.log("\u4ea4\u63db-\u8d10-\u768412, 13 \u756b")):"\u69bb"==e&&15==c.length&&15==d.length?(c.splice(14,1),d.splice(14,1),console.log("\u522a\u9664-\u69bb-\u591a\u51fa\u7684\u7b2c15\u7b46\u8cc7\u6599")):"\u779e"==e&&
17==c.length&&17==d.length?(c.splice(16,1),d.splice(16,1),console.log("\u522a\u9664-\u779e-\u591a\u51fa\u7684\u7b2c17\u7b46\u8cc7\u6599")):"\u6170"==e&&18==c.length&&18==d.length?(c.splice(15),d.splice(15),console.log("\u522a\u9664-\u6170-15\u756b\u5f8c\u591a\u51fa\u76843\u7b46\u8cc7\u6599")):"\u53eb"==e&&d[4]&&3==d[4].length?(e=d[4][1],d[4][1]=d[4][2],d[4][2]=e,console.log("\u4ea4\u63db-\u53eb-5\u756b\u7684\u6b65\u9a5f2, 3")):"\u554a"==e&&d[8]&&5==d[8].length&&(e=d[8][3],d[8][3]=d[8][4],d[8][4]=
e,console.log("\u4ea4\u63db-\u554a-9\u756b\u7684\u6b65\u9a5f4, 5")));e={};e.D=c;e.o=d;e.K=a.getElementsByTagName("Word")[0].getAttribute("sound");e.A=a.getElementsByTagName("Word")[0].getAttribute("parts");return e}
function Ha(a,c){var d=0,e=0,k="";if("undefined"==typeof a||null==a)return k;"number"!=typeof d&&(d=0);"number"!=typeof e&&(e=0);"number"==typeof c&&(c=[c]);for(var m=0;m<c.length;m++){for(var f=a[c[m]-1],l=0;l<f.length;l++){var n=f[l];switch(n.nodeName){case "MoveTo":var p=Number(n.getAttribute("x"))+d;var q=Number(n.getAttribute("y"))+e;k+=" M"+p+" "+q;break;case "LineTo":p=Number(n.getAttribute("x"))+d;q=Number(n.getAttribute("y"))+e;k+=" L"+p+" "+q;break;case "QuadTo":p=Number(n.getAttribute("x1"))+
d;q=Number(n.getAttribute("y1"))+e;var t=Number(n.getAttribute("x2"))+d;var r=Number(n.getAttribute("y2"))+e;k+=" Q"+p+" "+q+" "+t+" "+r;break;case "CubicTo":p=Number(n.getAttribute("x1"))+d;q=Number(n.getAttribute("y1"))+e;t=Number(n.getAttribute("x2"))+d;r=Number(n.getAttribute("y2"))+e;var u=Number(n.getAttribute("x3"))+d;n=Number(n.getAttribute("y3"))+e;k+=" C"+p+" "+q+" "+t+" "+r+" "+u+" "+n}}k+=" Z"}return k=k.trim()}
function Ia(a,c){var d=0,e=!1,k=!1,m=!1;"boolean"!=typeof e&&(e=!0);if("number"!=typeof d||2<d)d=0;"boolean"!=typeof k&&(k=!1);"boolean"!=typeof m&&(m=!0);if(c||"undefined"!=typeof window.localStorage[a]&&window.localStorage[a].match(/<stroke>/i)){c||(c=Ga(Fa(window.localStorage[a])));var f=c.o.length;"string"!=typeof c.A&&(c.A="1-"+f);d=Da(c.A,d);var l=0;if("undefined"!=typeof d&&null!=d&&0<d.length){var n=0;do{var p=0;do 0<d[n][p]&&d[n][p]<=f?(l++,p++):d[n].splice(p,1);while(0<d[n].length&&p<d[n].length);
0<d[n].length?n++:d.splice(n,1)}while(0<d.length&&n<d.length)}if(1>l||l>f)d=Da("1-"+f);else if(l<f){l={};for(n=0;n<f;n++)l[n+1]=n+1;for(n in d)for(p in d[n])delete l[d[n][p]];0<Object.values(l).length&&d.push(Object.values(l))}f='<svg id="'+a+'" viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">\n';for(n=0;n<d.length;n++){f+='<g fill="'+x[n%x.length]+'" fill-opacity="1" stroke="#000000" stroke-width="0" stroke-linejoin="round" stroke-opacity="0">';if(e)l=Ha(c.D,d[n]),f+='<path d="'+l+'" />';
else for(f+="\n",p=0;p<d[n].length;p++){var q=d[n][p];l=Ha(c.D,q);f+='<path d="'+l+'" id="t'+q+'" />\n'}f+="</g>\n"}if(k){e=f;k=c;var t,r;"number"!=typeof t&&(t=0);"number"!=typeof r&&(r=0);p="";if(k||"undefined"!=typeof window.localStorage[a]&&window.localStorage[a].match(/<stroke>/i))for(k||(k=Ga(Fa(window.localStorage[a]))),d=k.o.length,n=0;n<d;n++)l=k.o[n][0],f=Number(l.getAttribute("x"))+t,l=Number(l.getAttribute("y"))+r,p+='<text class="number" style="font-size:100px;font-style:bold;" x="'+
f+'" y="'+l+'">'+(n+1)+"</text>\n";f=e+p}if(m){m=f;var u,z;"number"!=typeof u&&(u=0);"number"!=typeof z&&(z=0);t="";if(c||"undefined"!=typeof window.localStorage[a]&&window.localStorage[a].match(/<stroke>/i)){c||(c=Ga(Fa(window.localStorage[a])));var E=c.o.length;for(a=0;a<E;a++)for(r=0;r<c.o[a].length;r++)k=c.o[a][r],"MoveTo"==k.nodeName&&(e=Number(k.getAttribute("x"))+u,k=Number(k.getAttribute("y"))+z,t+=(0==r?" M":" L")+e+" "+k)}t=t.trim();if(""!=t)var y='<circle cx="0" cy="0" r="120" style="fill:#ff0000a0;"><animateMotion begin="0s" dur="'+
((15>E?10>E?"5s":"8s":"10s")+'" path="'+t+'"  repeatCount="indefinite" /></circle>');f=m+("\n"+y+"\n")}return f+"</svg>\n"}return""}
function Ja(a){var c,d,e,k;return qa(function(m){c=a.codePointAt(0).toString(16).toUpperCase();d="SELECT * WHERE B='"+c+"' LIMIT 1";e=null;Ka("https://docs.google.com/spreadsheets/d/1cRQDIHe0isKNtKCvvXtP-I52d-1zCV1owDCo2cm164k/edit?usp=drive_link",d,!0,!0,function(f){var l="";if("undefined"!=typeof f&&null!=f&&"string"==typeof f.status&&"ok"==f.status){var n=f.table;if("undefined"!=typeof n.rows&&null!=n.rows&&0<n.rows.length)for(f=f.table.rows,n=0;n<f.length;n++)null!=f[n].c[2]&&"string"==typeof f[n].c[2].v&&
(l+=f[n].c[2].v,null!=f[n].c[3]&&"string"==typeof f[n].c[3].v&&(l+=f[n].c[3].v))}e=l});k=0;return m.return(new Promise(function(f){var l=setInterval(function(){if("string"==typeof e||30<k)return clearInterval(l),30<k&&(e=""),f(e);k++},100)}))})}
function La(a){var c,d,e,k;return qa(function(m){switch(m.b){case 1:return d=c="",e="https://g0v.github.io/zh-stroke-data/utf8/",ja(m,Ja(a),2);case 2:c=m.h;if(""!=c&&/<Stroke>/i.test(c)){m.b=3;break}console.log("fetch data from GitHub ...");d=e+a.codePointAt(0).toString(16)+".xml";m.l=4;return ja(m,fetch(d),6);case 6:return k=m.h,ja(m,k.text(),7);case 7:c=m.h;m.b=3;m.l=0;break;case 4:m.l=0,m.i=null,c="";case 3:return""==c||/<Stroke>/i.test(c)||(c=""),m.return(c)}})}
function Ma(a){var c,d,e,k;return qa(function(m){if(1==m.b)return"string"!=typeof a&&(a="\u96c4"),c=null,ja(m,La(a),2);e=m.h;"string"==typeof e&&0<e.length&&e.match(/<Stroke>/i)&&(c=Ga(Fa(e)),k=new RegExp(V(a)+"\\t([^\\t]+)\\t([^\\t]+)\\t([^\\n]*)\n*"),(d=window.stroke_parts_data.match(k))&&3<d.length&&(c.K="/sound/"+(/\.m4a/.test(d[2])?d[2]:d[2]+".mp3"),c.A=d[3]));return m.return(c)})}
function Na(){var a=Oa;Ca("https://gsyan888.github.io/html5_fun/html5_stroke_parts/stroke_parts_data.js",function(){"undefined"!=typeof window.stroke_parts_data&&null!=window.stroke_parts_data&&(window.stroke_parts_data=window.stroke_parts_data.trim().replace(/\r/g,"\n").replace(/\n+/g,"\n"));"function"==typeof a&&a()})}
function Pa(a){Ca("https://gsyan888.github.io/html5_fun/html5_stroke_parts/stroke_component.js",function(){"string"==typeof window.stroke_component&&(window.stroke_component=window.stroke_component.trim().replace(/\r/g,"\n").replace(/\n+/g,"\n"));"function"==typeof a&&a()})}function W(a,c){a=document.createElementNS("http://www.w3.org/2000/svg",a);if(c)for(var d=Object.keys(c),e=0;e<d.length;e++){var k=d[e];a.setAttribute(k,c[k])}return a}
function Qa(a,c){a=a.getBoundingClientRect().toJSON();c=c.getBoundingClientRect().toJSON();a.left-=.1*a.width;a.right+=.1*a.width;a.top-=.1*a.height;a.bottom+=.1*a.height;return a&&c?c.left&&c.right&&c.top&&c.bottom?c.left>=a.left&&c.right<=a.right&&c.top>=a.top&&c.bottom<=a.bottom:c.x>=a.left&&c.x<=a.right&&c.y>=a.top&&c.y<=a.bottom:!1}
function Ra(a,c){if(c||"function"!=typeof AudioContext)return c=document.createElement("audio"),c.preload=!0,c.loop=!1,c.src=a,c;var d=new AudioContext,e=new XMLHttpRequest;e.open("GET",a);e.responseType="arraybuffer";e.onload=function(){d.decodeAudioData(e.response,function(k){d.C=k})};e.send();return d}
function Sa(a){if("undefined"!=typeof a&&null!=a)if("undefined"==typeof a.C&&"undefined"!=typeof a.play)a.load(),a&&0<a.currentTime&&!a.paused&&!a.ended&&2<a.readyState||a.play();else if(!(a&&0<a.currentTime&&!a.paused&&!a.ended&&2<a.readyState)){var c=a.createBufferSource();c.buffer=a.C;c.connect(a.destination);c.start()}}
function Ta(){if("undefined"==typeof A||null==A)A=Ra("https://gsyan888.github.io/html5_fun/assets/sound-ding-dong-ding-dong.mp3");if("undefined"==typeof D||null==D)D=Ra("https://gsyan888.github.io/html5_fun/html5_wheel/assets/sound_spin.mp3");if("undefined"==typeof H||null==H)H=Ra("https://gsyan888.github.io/html5_fun/assets/sound-coin.mp3")}
function Ua(a){var c="zh-TW";"string"!=typeof c&&(c="en-US");if(!/https:\/\//.test(a)){a=a.replace(/\.tts$/,"");/\.(\w{2}\-\w{2})$/.test(a)||(a+="."+c);var d=c="";/\.(\w{2}\-\w{2})$/.test(a)&&(a=window.RegExp.leftContext,d=window.RegExp.lastParen);isNaN(1)||(c="https://translate.google.com/translate_tts?ie=UTF-8&tl=${tts_language}&client=tw-ob&ttsspeed=${tts_speed}&q=".replace(/\$\{tts_language\}/i,""==d?"zh-TW":d),c=c.replace(/\$\{tts_speed\}/i,(1).toString()),c+=encodeURIComponent(a));a=c}"undefined"==
typeof L||null==L?L=Ra(a,!0):L.src=a;L.M=[];Sa(L)}
function Va(){function a(f){var l=document.getElementById("practiceSVG").getScreenCTM();if(f.touches){for(var n=f.changedTouches[0].identifier,p=-1,q=0;q<f.touches.length;q++)if(f.touches[q].identifier==n){p=q;break}0>p&&(p=0);f=f.touches[p]}return{x:(f.clientX-l.e)/l.a,y:(f.clientY-l.f)/l.d}}function c(f){var l=-1;if("undefined"!=typeof f.changedTouches&&null!=f.changedTouches&&0<f.changedTouches.length){f=f.changedTouches[0].identifier;for(var n=0;n<m.length;n++)null!=m[n].id&&m[n].id==f&&(l=n)}else l=
0;return l}N=[];var d=document.querySelector("#gameWrapper"),e=document.querySelector("#practice");e||(e=document.createElement("div"),e.id="practice",document.body.appendChild(e));var k=document.querySelector("#practiceSVG");if(k)try{Array.from(k.children).forEach(function(f){return f.remove()})}catch(f){}else k=W("svg",{viewBox:"0 0 2048 2048"}),k.setAttribute("id","practiceSVG"),k.setAttribute("width","100%"),k.setAttribute("height","100%"),e.appendChild(k);if("undefined"!=typeof penDown)try{k.removeEventListener("mousedown",
penDown)}catch(f){}if("undefined"!=typeof penMove)try{k.removeEventListener("mousemove",penMove)}catch(f){}if("undefined"!=typeof penUp)try{k.removeEventListener("mouseup",penUp)}catch(f){}if("undefined"!=typeof penUp)try{k.removeEventListener("mouseleave",penUp)}catch(f){}if("undefined"!=typeof penDown)try{k.removeEventListener("touchstart",penDown)}catch(f){}if("undefined"!=typeof penMove)try{k.removeEventListener("touchmove",penMove)}catch(f){}if("undefined"!=typeof penUp)try{k.removeEventListener("touchend",
penUp)}catch(f){}if("undefined"!=typeof penUp)try{k.removeEventListener("touchleave",penUp)}catch(f){}if("undefined"!=typeof penUp)try{k.removeEventListener("touchcancel",penUp)}catch(f){}var m=[];penDown=function(f){Ta();var l=f.target;if("path"==l.tagName||l.classList.contains("pathBg")||l.classList.contains("wordNG")){f.preventDefault();f.stopPropagation();var n={};"undefined"!=typeof f.changedTouches&&null!=f.changedTouches&&0<f.changedTouches.length&&(n.id=f.changedTouches[0].identifier);n.target=
f.target;n.position=a(f);m.push(n);f=l.parentElement.getBBox();f=W("rect",{id:"tempRect",width:f.width,height:f.height,x:f.x,y:f.y,style:"fill:#ffffff80;stroke:#0000ff;stroke-width:4;stroke-opacity:0.35"});l.parentElement.appendChild(f);if("g"==l.parentElement.tagName){l=l.parentElement;f=l.parentElement;n=[];for(var p=f.children.length-1;0<=p;p--){var q=f.children[p];if(q==l)break;else n.push(q),f.removeChild(q)}for(p=n.length-1;0<=p;p--)f.insertBefore(n[p],l)}}};penMove=function(f){f.preventDefault();
f.stopPropagation();var l=c(f),n=m[l];if("undefined"!=typeof n&&null!=n){var p=a(f);f=n.target.parentElement;var q=f.getAttribute("transform"),t;q&&(t=q.match(/translate\s*\(\s*([^\)]+)\s*\)/i))?(t=t[1].trim().split(/\s+/),2==t.length?q={x:Number(t[0]),y:Number(t[1])}:q={x:0,y:0}):q={x:0,y:0};f.setAttribute("transform","translate("+(q.x+p.x-n.position.x)+" "+(q.y+p.y-n.position.y)+")");m[l].position=p}};penUp=function(f){var l=document.querySelector("#tempRect");l&&l.remove();f=c(f);0<=f&&m.splice(f,
1)};k.addEventListener("mousedown",penDown);k.addEventListener("mousemove",penMove);k.addEventListener("mouseup",penUp);k.addEventListener("mouseleave",penUp);k.addEventListener("touchstart",penDown);k.addEventListener("touchmove",penMove);k.addEventListener("touchend",penUp);e=document.querySelector("#nextBtn");if("undefined"==typeof e||null==e)e=document.createElement("button"),e.setAttribute("id","nextBtn"),e.setAttribute("class","circleBtn nextBtn hidden"),e.setAttribute("onclick","btnSleep(this, 500);newGame();"),
e.innerHTML="<label>\u4e0b\u4e00\u984c</label>",d.appendChild(e),e=document.createElement("button"),e.setAttribute("class","circleBtn checkBtn hidden"),e.setAttribute("onclick","btnSleep(this, 500);checkAnswer();"),e.innerHTML="<label>\u9001\u51fa<br>\u7b54\u6848</label>",d.appendChild(e),e=document.createElement("button"),e.setAttribute("class","roundBtn skipBtn hidden"),e.setAttribute("onclick","btnSleep(this, 500);skipQuestion();"),e.innerHTML="<label>\u7a0d\u5f8c\u4f5c\u7b54</label>",d.appendChild(e),
e=document.createElement("button"),e.setAttribute("class","roundBtn randomBtn hidden"),e.setAttribute("onclick","randomPosition();"),e.innerHTML="<label>\u90e8\u4ef6\u91cd\u6392</label>",d.appendChild(e),"1"==X("debug")&&(e=document.createElement("button"),e.setAttribute("class","roundBtn showAnsBtn"),e.setAttribute("onclick","showAnswer();"),e.innerHTML="<label>\u986f\u793a\u7b54\u6848</label>",d.appendChild(e));e=d.querySelector(".message");if("undefined"==typeof e||null==e)e=document.createElement("div"),
e.setAttribute("class","message"),d.appendChild(e);e.setAttribute("style","opacity:0;")}function Wa(a){var c=0,d=document.querySelector("#practiceSVG");d&&(c=Math.floor((d.viewBox.baseVal.width-2048*S.length-40*(S.length-1))/2)+2088*a);return{x:c,y:1024}}
function Xa(){var a,c=document.querySelector("#practiceSVG");if(c)for(var d=0;d<c.children.length;d++){var e=c.children[d],k=e.getAttribute("id");"g"==e.tagName&&"string"==typeof k&&(a=k.match(/([^-]+)-(\d+)-(\d+)/))&&(k=Wa(Number(a[2])),e.setAttribute("transform","translate("+k.x+" "+k.y+")"))}}
function Ya(){var a=document.querySelector("#practiceSVG");if(a)for(var c=0;c<S.length;c++){var d=Wa(c);d=W("g",{transform:"translate("+d.x+" "+d.y+")","stroke-width":3});var e="";e+='<rect width="2048" height="2048" fill="none" stroke="green" rx="150" ry="150" />\n';e+='<line x1="0" x2="2048" y1="1024" y2="1024" stroke="red" stroke-dasharray="50" />\n';e+='<line y1="0" y2="2048" x1="1024" x2="1024" stroke="red" stroke-dasharray="50" />\n';d.innerHTML=e;a.appendChild(d)}}
function Za(a){var c,d,e,k,m,f,l,n,p,q,t,r,u,z,E,y,w,C,F,I;qa(function(M){if(1==M.b){if(!(0<R.length)){"function"==typeof a&&($a(),a());M.b=0;return}R.length==S.length&&(window.b=Array.from({length:ab(S)},function(J,B){return B}));c=Math.floor(Math.random()*R.length);d=R[c];R.splice(c,1);e=S[d];return ja(M,Ma(e),3)}k=M.h;m=Ia(e,k);f=new DOMParser;l=f.parseFromString(m,"text/html");n=bb(e);p=document.querySelector("#practiceSVG");q=p.viewBox.baseVal;t=2048*d;r="translate("+t+" 1024)";u=l.querySelectorAll("g");
0==u.length&&(z=W("g"),E=W("text",{"font-size":1679,"class":"wordNG",style:"pointer-events:all;",x:1024,y:1024,"dominant-baseline":"central","text-anchor":"middle"}),E.innerHTML=e,z.appendChild(E),u=[z]);for(y=0;y<u.length;y++)u[y].setAttribute("id",e+"-"+d+"-"+y),u[y].setAttribute("transform",r),p.appendChild(u[y]),Array.from(u[y].querySelectorAll("path")).forEach(function(J){var B=J.getBBox();B=ba([B.x,B.y,B.width,B.height]);var O=B.next().value,P=B.next().value,K=B.next().value,G=B.next().value;
B=(500>K?1.5:1351.68>K?1:.75)*K/2;var Ea=(500>G?1.5:1351.68>G?1:.75)*G/2;O+=K/2;P+=G/2;K="fill:#ffffff;fill-opacity:0.001; stroke:none;stroke-opacity:0;";"1"==X("debug")&&(K="fill:#ffff00;fill-opacity:0.1; stroke:none;stroke-opacity:0;");B=W("ellipse",{"class":"pathBg",cx:O,cy:P,rx:B,ry:Ea,style:K});J=J.parentElement;J.insertBefore(B,J.children[0])}),n&&n[y]&&u[y].setAttribute("cns",n[y]),w=u[y].getBBox(),ab(S),c=Math.floor(Math.random()*window.b.length),C=window.b[c],window.b.splice(c,1),F=q.width/
2-w.width/2-w.x,I=q.height/2-w.height/2-w.y,u[y].setAttribute("transform","translate("+F+" "+I+")"),u[y].setAttribute("fill",x[C%x.length]);Za(a);M.b=0})}
function $a(){var a=document.querySelector("#practiceSVG");if(a){var c=a.viewBox.baseVal,d=c.width/ab(S),e=Array.from({length:ab(S)},function(t,r){return r});a=a.querySelectorAll("g");for(var k=0;k<a.length;k++){var m=a[k];if(/[^-]+-\d+-\d+/.test(m.getAttribute("id"))){var f=m.getBBox(),l=Math.floor(Math.random()*e.length),n=e[l],p=n*d-f.x;p=0>p-f.width/2?f.width/2-f.x:p-f.width/2;p+f.width+2*f.x>c.width&&(p=c.width-f.width-f.x-50);var q=2048*(1-Math.floor(3*Math.random()))/5-f.y-f.height/2;1024<
q+f.y+f.height&&(q=974-f.height-f.y);e.splice(l,1);m.setAttribute("transform","translate("+p+" "+q+")");m.setAttribute("fill",x[n%x.length])}}cb()}}function ab(a){for(var c=0,d=0;d<a.length;d++){var e=void 0;var k="";(e=window.stroke_parts_data.match(new RegExp(V(a[d])+"\\t([^\\t]+)\\t([^\\t]+)\\t([^\\n]*)\n*")))&&3<e.length&&(k=e[3]);e=k;""!==e?c+=Da(e,0).length:c++}return c}
function bb(a){var c=[],d;"undefined"==typeof window.stroke_component||null==window.stroke_component?Pa():(d=window.stroke_component.match(new RegExp(V(a)+"\\t([^\\n]*)\n*")))&&2<=d.length?c=d[1].trim().split(";")[0].split(","):c.push(a);return c}
function db(a){var c=S;"string"==typeof c&&(c=Array.from(c));var d="";c.forEach(function(e){return d+=(""==d?"":" AND")+" A LIKE '%"+e+"%'"});Ka("https://docs.google.com/spreadsheets/d/1gXpIr34zH65D50td6vnuKbM4yy1WPNQTbReDguCy5lY/edit?usp=sharing","SELECT * WHERE "+d,!0,!0,function(e){var k=[];if("undefined"!=typeof e&&null!=e&&"string"==typeof e.status&&"ok"==e.status){var m=e.table;if("undefined"!=typeof m.rows&&null!=m.rows&&1<m.rows.length&&(e=e.table.rows.filter(function(f){return f.c&&f.c[0].v.length==
c.length}),1<e.length))for("string"!=typeof c&&(c=c.join("")),m=0;m<e.length;m++)e[m].c[0].v!=c&&k.push(e[m].c[0].v.trim())}"function"==typeof a?a(k):console.log(JSON.stringify(k))})}function eb(a){var c,d={x:0,y:0};(a=a.getAttribute("transform"))&&(c=a.match(/translate\s*\(([^\)]+)\)/i))&&(c=c[1].split(/\s+/))&&2==c.length&&(d.x=Number(c[0]),d.y=Number(c[1]));return d}
function fb(){var a=[],c,d=document.querySelector("#practiceSVG");if(d){for(var e=0;e<S.length;e++)a[e]={},a[e].a=[],a[e].w={},a[e].cns=[];for(e=S.length;e<d.children.length;e++){var k=d.children[e],m=k.getAttribute("id");if("g"==k.tagName&&"string"==typeof m&&(c=m.match(/([^-]+)-(\d+)-(\d+)/))){var f=c[1];m=k.getAttribute("cns");for(var l=0;l<a.length;l++)if(Qa(d.children[l],k)){a[l].a.push(k);a[l].cns.push(m);null==a[l].w[f]?a[l].w[f]=1:a[l].w[f]++;break}}}c=[];d=S.slice();for(e=0;e<a.length;e++){k=
a[e].cns.length;f=Object.keys(a[e].w);for(l=0;l<f.length;l++)if(m=bb(f[l]),m.length!=k)delete a[e].w[f[l]];else{for(var n=0;n<k&&0<m.length;n++)for(var p=0;p<m.length;p++)if(m[p]==a[e].cns[n]){m.splice(p,1);break}0<m.length&&delete a[e].w[f[l]]}m=Object.keys(a[e].w).length;if(0==m)c.push(e),console.log("NG: ",e,a[e]);else if(1==m)for(n=0;n<d.length;n++)if(d[n]==Object.keys(a[e].w)[0]){d.splice(n,1);break}}for(e=0;e<c.length;e++)for(k=a[c[e]].cns.length,n=0;n<d.length;n++)if(f=d[n],m=bb(f),m.length==
k){for(l=0;l<k&&0<m.length;l++)for(p=0;p<m.length;p++)if(m[p]==a[c[e]].cns[l]){m.splice(p,1);break}if(0==m.length){a[c[e]].w[f]=k;break}}}return a}
function gb(){for(var a="",c=fb(),d=c.length-1,e=0;e<=d;e++){var k=c[e],m=Object.keys(k.w);m.sort(function(t,r){return k.w[t]-k.w[r]});for(var f=0;f<m.length;f++){var l=m[f],n=bb(l);if(k.cns.length==n.length){for(var p=0;p<k.cns.length&&0<n.length;p++)for(var q=0;q<n.length;q++)if(k.cns[p]==n[q]){n.splice(q,1);break}if(0==n.length){a+=l;break}}}}return{term:a,rect:c}}
function hb(a){function c(w,C){var F=null;if(w&&w.a&&1<w.a.length&&"string"==typeof C){w.a=w.a.sort(function(Ea,vb){return e(vb)-e(Ea)});for(var I=eb(w.a[0]),M=0;M<w.a.length;M++){var J=w.a[M],B=J.getAttribute("id"),O=J.getAttribute("cns"),P=B.match(/([^-]+)-(\d+)-(\d+)/)[1],K=!0;O=t.querySelectorAll('g[id*="'+C+'"][cns="'+O+'"]');if(P==C){var G=eb(J);204.8>=Math.abs(G.x-I.x)&&204.8>=Math.abs(G.y-I.y)&&(K=!1)}if(K&&0<O.length)for(P=0;P<O.length;P++)if(G=O[P],G.getAttribute("id")!=B&&(G=d(J,G),204.8>=
Math.abs(G.x-I.x)&&204.8>=Math.abs(G.y-I.y))){K=!1;break}if(K){F=J;break}}}return F}function d(w,C){var F=C.getBBox(),I=w.getBBox();C=I.x-F.x+(I.width-F.width)/2;F=I.y-F.y+(I.height-F.height)/2;w=eb(w);w.x+=C;w.y+=F;return w}function e(w){w=w.getBBox();return w.width*w.height}function k(w){if(w){var C=w.getBBox();C=W("rect",{"class":"hintRect",width:C.width,height:C.height,x:C.x,y:C.y,style:"fill:#ffff00;fill-opacity:0.5;stroke:#ff0000;stroke-width:20;stroke-opacity:0.25"});w.insertBefore(C,w.children[0])}else(w=
document.querySelectorAll(".hintRect"))&&Array.from(w).forEach(function(F){return F.remove()})}var m=!0,f=null,l=0,n=0,p=[];if("string"==typeof a){var q=("string"==typeof S?S:S.join("")).trim();a=a.trim();if(a.length>=q.length)p=new RegExp(V(q)),p.test(a)||("function"==typeof ib?(q=ib(q),a=ib(a),p=new RegExp(V(q)),p.test(a)||(m=!1)):m=!1);else return!1}else{Ta();for(q=0;q<S.length;q++)p[q]={},p[q].q=bb(S[q]),p[q].a=[],l+=p[q].q.length;var t=document.querySelector("#practiceSVG");if(t)for(q=0;q<t.children.length;q++){var r=
t.children[q],u=r.getAttribute("id");if("g"==r.tagName&&"string"==typeof u&&u.match(/([^-]+)-(\d+)-(\d+)/)){u=r.getAttribute("cns");for(var z=0;z<p.length;z++)if(Qa(t.children[z],r)){p[z].a.push(r);n++;break}}}for(q=0;q<p.length;q++){r=p[q];if(r.a.length!=r.q.length){m=!1;break}var E=r.q.slice(0);for(z=0;z<r.a.length;z++){u=r.a[z].getAttribute("cns");for(var y=0;y<E.length;y++)if(u==E[y]){E.splice(y,1);break}}if(0<E.length){m=!1;break}}if(m)for(q=0;q<p.length;q++)if(r=p[q],u=c(r,S[q])){k(u);setTimeout(function(){k()},
250);U("\u52a0\u6cb9<br>\u7b2c "+(q+1)+" \u500b\u5b57\u518d\u6392\u597d\u4e00\u9ede","#ff6699a0",.75);"undefined"!=typeof D&&null!=D&&Sa(D);return}}if(m||"string"==typeof a)jb(m,n,l,f);else if(a=gb(),Array.from(a.term).length==S.length){console.log("search dic: "+a.term);U("\u5b57\u62fc\u5c0d\u4e86\uff0c\u8a5e\u4e0d\u540c<br>\uff5e\u67e5\u5b57\u5178\u4e2d\uff0c\u8acb\u7a0d\u5019\uff5e","#FF94B8",2);document.querySelector(".checkBtn").enable=!1;f="";if(0<va.length)for(q=0;q<va.length;q++)if(a.term==
va[q]){f=a.term;break}if(""!=f)for(q=0;q<a.rect.length;q++)if(r=a.rect[q],u=c(r,Object.keys(a.rect[q].w)[0])){k(u);setTimeout(function(){k()},250);U("\u52a0\u6cb9<br>\u7b2c "+(q+1)+" \u500b\u5b57\u518d\u6392\u597d\u4e00\u9ede","#ff6699a0",.75);"undefined"!=typeof D&&null!=D&&Sa(D);return}jb(""!=f,n,l,f)}else jb(m,n,l,f);return m}
function jb(a,c,d,e){var k="";if(a){Xa();a=100;c="green";d=1.5;0==N.length?(k="\u5df2\u7d93\u5168\u90e8\u6311\u6230\u5b8c\uff5e\u52a05000\u5206",a=5E3,c="#56B4E9",d=3):k="\u606d\u559c\u904e\u95dc!!";U('<span style="color:#99cc33;font-size:1.25em;">\u592a\u68d2\u4e86</span><br>'+k,c,d,function(){var m=document.querySelector("#nextBtn");m&&m.classList.toggle("hidden",!1);kb(S,e)});"undefined"!=typeof A&&null!=A&&Sa(A);k="";"string"!=typeof S&&(k=S.join(""));"string"==typeof e&&""!=e&&(k+=","+e);""!=
k&&Ua(k);k=[".checkBtn",".skipBtn",".randomBtn"];for(c=0;c<k.length;c++)(d=document.querySelector(k[c]))&&d.classList.toggle("hidden",!0);lb(a)}else k=c<d&&"string"!=typeof answerTxt?"\u8acb\u6aa2\u67e5\u90e8\u4ef6\u662f\u5426\u90fd\u5b8c\u6574\u5730\u5728\u65b9\u683c\u5167<br>\u6709 "+(d-c)+" \u500b\u9700\u8981\u8abf\u6574\u4f4d\u7f6e":"\u54e6~ \u54e6~~ \u518d\u8a66\u8a66",U('<span style="color:yellow;font-size:1.25em;">\u52a0\u6cb9</span><br>'+k,"red",3),"undefined"!=typeof D&&null!=D&&Sa(D)}
function mb(a){var c=document.createElement("textarea");c.innerHTML=a;return c.value}
function U(a,c,d,e){d||(d=2);if("undefined"==typeof c||null==c)c="#44AF49";var k=document.querySelector(".message");"hidden"!=getComputedStyle(k).getPropertyValue("visibility")?(k.innerHTML=a,k.style.display="block",k.style["background-color"]=c,k.style.opacity=.75,k.style.transition="opacity "+d+"s ease-out",setTimeout(function(){k.style.opacity=0;"function"==typeof e&&e()},Math.floor(1E3*d))):alert(mb(a).replace(/<br>/g,"\n"))}var Y=1,nb=1;
function ob(a){"boolean"!=typeof a&&(a=!1);if("undefined"!=typeof Q&&null!=Q&&1<Q.length){if("undefined"==typeof N||null==N||0==N.length){var c=Q.split(/\n+/).filter(function(m){return""!=m.replace(/\s/g,"")});N=Array.from({length:c.length},function(m,f){return{q:c[f],p:ab(c[f]),B:!1}});N.sort(function(m,f){return m.p-f.p});ua=N.length;Y=N[0].p;nb=Y+1}var d=N[N.length-1].p;for(var e=[];Y<=d&&0<N.length;)if(e=N.filter(function(m){return m.p>=Y&&m.p<=nb&&!m.B}),0==e.length)Y++,nb++;else if(3<N.filter(function(m){return!m.B}).length&&
3>=e.length)nb++;else break;Y==N[0].p||N[0].B||(a||(U("\u606d\u559c\u5347\u7d1a<br>\u52a0\u767c\u9ede\u6578 1000","blue",2),lb(1E3)),Y=N[0].p);e=0<e.length?e.filter(function(m){return m.p==Y}):N.slice(0);var k=Math.floor(Math.random()*e.length);d=Array.from(e[k].q.trim());N=N.filter(function(m){return m.q!=e[k].q});"function"==typeof pb&&pb(ua-N.length)}return d}
function cb(){var a=document.querySelector("#practiceSVG"),c=Array.from(a.children);c.splice(0,S.length);c.sort(function(d,e){d=d.getBBox();e=e.getBBox();return e.width*e.height-d.width*d.height});c.forEach(function(d){return d.remove()});c.forEach(function(d){return a.appendChild(d)})}
function qb(){var a=document.querySelector("#practice"),c=document.querySelector("#practiceSVG");if(c&&a&&"undefined"!=typeof S&&null!=S){var d=a.getBoundingClientRect();a=d.width/S.length;d=d.height/2.25;var e=1;a>d&&(e=a/d);c.setAttribute("viewBox","0 0 "+Math.floor(2048*S.length*e+40*(S.length+1))+" 2048");c.setAttribute("width","100%");c.setAttribute("height","100%")}}
function rb(a){"boolean"!=typeof a&&(a=!1);Array.from(document.querySelector("#practiceSVG").children).forEach(function(d){return d.remove()});var c=document.querySelector("#nextBtn");c&&c.classList.toggle("hidden",!0);kb();S=ob(a);"undefined"!=typeof S&&null!=S&&0<S.length&&("string"==typeof S&&(S=Array.from(S.trim())),db(function(d){va=d}),qb(),Ya(),R=Array.from({length:S.length},function(d,e){return e}),Za(function(){cb();for(var d=[".checkBtn",".skipBtn",".randomBtn"],e=0;e<d.length;e++){var k=
document.querySelector(d[e]);k&&k.classList.toggle("hidden",!1)}ta&&(U('<span style="color:#ffff00;font-size:1.25em;">\u958b\u59cb\u95d6\u95dc</span><br>\u8acb\u5c07\u90e8\u4ef6\u62d6\u66f3\u5230\u65b9\u6846\u4e2d\u62fc\u6210\u5b57<br>\u8a9e\u8a5e\u62fc\u597d\u4e86\uff0c\u5c31\u6309 [\u9001\u51fa\u7b54\u6848] \u9215',"orange",3),ta=!1)}))}var Z=null;function sb(){var a=document.getElementById("micButton");a&&(a.style["background-color"]="dodgerblue");Z&&"function"==typeof Z.stop&&Z.stop()}
function tb(){Z.onstart=function(){document.getElementById("micButton").style["background-color"]="Violet";console.log("--------\u8a9e\u97f3\u8fa8\u8b58\u958b\u59cb--------")};Z.onend=function(){var a=document.getElementById("micButton");a.style["background-color"]="DodgerBlue";a.b.innerText="";console.log("========\u8a9e\u97f3\u8fa8\u8b58\u7d50\u675f========")};Z.onresult=function(a){var c=a.resultIndex;a=a.results[c][a.results[c].length-1].transcript;console.log(a);c=/Viole/i.test(document.getElementById("micButton").style["background-color"]);
a&&c&&(c=300,hb(a)?sb():c=1E3,document.getElementById("micButton").b.innerText=a,setTimeout(function(){document.getElementById("micButton").b.innerText=""},c))};Z.onerror=function(a){var c="\u932f\u8aa4\u4ee3\u78bc\u53ca\u8a0a\u606f: ["+a.error+"] ["+a.message+"]";/not-allowed/i.test(a.error)?U("\u7121\u6cd5\u4f7f\u7528\u8a9e\u97f3\u8fa8\u8b58(\u53ef\u80fd\u9700\u8981\u6aa2\u67e5\u9ea5\u514b\u98a8\u8a2d\u5b9a\u3001\u5b89\u5168\u3001\u96b1\u79c1\u8a2d\u5b9a\uff1b\u6216\u662f\u8acb\u63db\u4e00\u7a2e\u700f\u89bd\u5668\u518d\u8a66\u8a66)<br>"+
c):/aborted/i.test(a.error)?/kAFAssistantErrorDomain/i.test(a.message)&&U("\u7121\u6cd5\u4f7f\u7528\u8a9e\u97f3\u8fa8\u8b58(\u7b49\u4e00\u4e0b\uff1b\u6216\u662f\u5148[\u5132\u5b58]\u9032\u5ea6\u3001\u95dc\u9589\u700f\u89bd\u5668\u4e26\u91cd\u958b\u5f8c\u518d[\u8f09\u5165]\u9032\u5ea6\u8a66)<br>"+c):/no\-speech/i.test(a.error)||U("Error<br>"+c)}}
function ub(a){"function"==typeof Ta&&Ta();a.preventDefault();a=document.getElementById("micButton");if("function"==typeof window.SpeechRecognition||"function"==typeof window.webkitSpeechRecognition||"function"==typeof window.g||"function"==typeof window.h){if("undefined"==typeof Z||null==Z)Z=new (window.webkitSpeechRecognition||window.SpeechRecognition||window.g||window.h),Z.continuous=!0,Z.interimResults=!0,Z.lang="zh-TW","string"==typeof wa&&""!=wa&&(Z.lang=wa),Z.interimResults=!0,tb();if("dodgerblue"==
a.style["background-color"].toLowerCase())if((a=document.querySelector(".checkBtn"))&&a.classList.contains("hidden"))U("\u8acb\u5148\u6309\u4e0b\u4e00\u984c<br>\u624d\u80fd\u555f\u52d5\u8a9e\u97f3\u8f38\u5165\u7684\u529f\u80fd","red");else try{Z.start()}catch(c){setTimeout(function(){Z.start()},100)}else try{sb()}catch(c){}}else alert("\u62b1\u6b49~ \u60a8\u7684\u700f\u89bd\u5668\u4e0d\u652f\u63f4\u8a9e\u97f3\u8fa8\u8b58(webkitSpeechRecognition)\u7684\u529f\u80fd"),a.removeEventListener("mousedown",
ub),a.removeEventListener("touchstart",ub),a.remove()}function wb(){var a=document.createElement("script");a.setAttribute("type","text/javascript");a.onload=function(){};a.setAttribute("src","https://gsyan888.github.io/html5_fun/assets/pinyin.js");document.getElementsByTagName("head")[0].appendChild(a)}
function ib(a){var c="";if("string"==typeof pinyinDic&&0<pinyinDic.length)for(var d=0;d<a.length;){var e=a.substr(d++,1);if(/[^a-z|A-Z|0-9|,|\+|\$|\^|\(|\)|\*|\.|\|]/.test(e)){var k=pinyinDic.match(new RegExp(V(e)+"([^,]+)"));e="undefined"!=typeof k&&null!=k?k[1]:e}c+=e}return""==c?a:c}function X(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(window.location.href);return null==a?"":a[1]}
function xb(){var a=X("lang");""!=a&&(wa=a);if("function"==typeof window.SpeechRecognition||"function"==typeof window.webkitSpeechRecognition||"function"==typeof window.g||"function"==typeof window.h){if("undefined"!=typeof micButton&&null!=micButton){try{micButton.removeEventListener("mousedown",ub)}catch(c){}try{micButton.removeEventListener("touchstart",ub)}catch(c){}try{micButton.remove()}catch(c){}}setTimeout(function(){var c=document.getElementById("gameWrapper"),d=document.createElement("button");
d.id="micButton";d.setAttribute("class","circleBtn micBtn");d.title="\u6309\u9019\u88e1\u555f\u7528/\u95dc\u9589\u8a9e\u97f3\u8fa8\u8b58";d.innerHTML="MIC";c.appendChild(d);c=document.createTextNode("");d.b=document.createElement("div");d.b.id="speechText";d.b.appendChild(c);d.appendChild(d.b);d.addEventListener("mousedown",ub);d.addEventListener("touchstart",ub);("string"!=typeof pinyinDic||0>=pinyinDic.length)&&wb()},1E3)}}
function Ba(a){var c="";!/^https:\/\//.test(a)&&20<a.length?c=a:/\/d\/([^\/]{20}[^\/]+)\//.test(a)&&(c=window.RegExp.lastParen);return c}function yb(a,c,d){var e=Ba(a),k=a.match(/[#&\?]gid=(\d+)/);k=k&&1<k.length?k[1]:"-1";a="";""!=e&&(a="https://docs.google.com/spreadsheets/d/"+e+"/gviz/tq?tqx=out:json","-1"!=k&&(a+="&gid="+k),"string"==typeof c&&""!=c.replace(/\s/g,"")&&(c=encodeURIComponent(c),a+="&tq="+c),"number"==typeof d&&(a+="&headers="+d));return a}
function zb(a,c){var d=document.createElement("script");"undefined"==typeof window.google&&(window.google={});"undefined"==typeof window.google.visualization&&(window.google.visualization={});"undefined"==typeof window.google.visualization.Query&&(window.google.visualization.Query={});window.google.visualization.Query.setResponse=c;d.setAttribute("type","text/javascript");d.setAttribute("charset","utf-8");d.setAttribute("src",a);d.onload=d.onreadystatechange=function(){d.readyState&&"loaded"!==d.readyState&&
"complete"!==d.readyState||(d.onload=d.onreadystatechange=null,document.getElementsByTagName("head")[0].removeChild(d))};d.onerror=function(){d.onerror=null;document.getElementsByTagName("head")[0].removeChild(d);if("function"==typeof c)c();else{var e="\u7121\u6cd5\u8f09\u5165\u8a2d\u5b9a.",k=document.querySelector(".resultBlock");"undefined"!=typeof k&&null!=k&&(e+="\n\n\u8acb\u78ba\u8a8d\u4e00\u4e0b:\n\n* \u8a66\u7b97\u8868\u5171\u7528\u9023\u7d50\u7684\u7db2\u5740\u662f\u5426\u6b63\u78ba, \n\n* \u662f\u5426\u958b\u653e\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u6aa2\u8996.",
k.style.display="none");setTimeout(function(){alert(e)},100)}};a=document.getElementsByTagName("head")[0];a.insertBefore(d,a.firstChild)}
function Ka(a,c,d,e,k){"string"!=typeof a?a="":/^https:\/\//i.test(a)||(a="https://docs.google.com/spreadsheets/d/"+a+"/edit?usp=sharing");"boolean"!=typeof e&&(e=!0);if(/^https:\/\//i.test(a)&&/spreadsheets/.test(a)){var m="",f=null;"boolean"==typeof d&&d&&(f=0);a=yb(a,c,f);zb(a,function(l){if("boolean"==typeof d&&d)"function"==typeof k?k(l):console.log(l);else{if("undefined"!=typeof l&&null!=l&&"string"==typeof l.status&&"ok"==l.status&&"undefined"!=typeof l.table.rows&&null!=l.table.rows&&0<l.table.rows.length){m=
"";var n=-1,p=0,q=l.table.cols;if(0==l.table.parsedNumHeaders)for(var t=l.table.rows[0].c,r=0;r<t.length;r++){var u=l.table.rows[0].c[r].v;if("string"==typeof u&&"\u6210\u8a9e"==u.trim()){n=r;p=1;break}}else for(r=0;r<q.length;r++)if("\u6210\u8a9e"==q[r].label.trim()){n=r;break}0>n&&(n=0,0<l.table.parsedNumHeaders&&(u=l.table.cols[n].label,"string"==typeof u&&""!=u.replace(/\s/g,"")&&(m+=u.trim())));console.log("get @"+n,"from "+p,q);if(0<=n)for(r=p;r<l.table.rows.length;r++)p=l.table.rows[r].c[n],
"undefined"!=typeof p&&null!=p?"string"==typeof p.v&&""!=p.v.replace(/\s/g,"")?m+=p.v.trim()+"\n":e||(m+="\n"):e||(m+="\n")}""!=m?"function"==typeof k?k(m):console.log(m):("undefined"!=typeof l&&null!=l&&"undefined"!=typeof l.table&&console.log(l.table),T=!1,U("\u7121\u6cd5\u8f09\u5165\u984c\u5eab<br>\u8acb\u78ba\u8a8d\u8a66\u7b97\u8868\u4e2d\u7684\u5167\u5bb9\u5f8c\u518d\u8a66","red",10,function(){Ab(0)}))}})}else T=!1,U("\u7121\u6cd5\u8f09\u5165\u984c\u5eab<br>\u7db2\u5740\u4f3c\u4e4e\u4e0d\u662f\u8a66\u7b97\u8868\u7684\uff0c\u8acb\u78ba\u8a8d\u5f8c\u518d\u8a66",
"red",10,function(){Ab(0)})}function Bb(a,c,d,e,k){function m(l){f||(f=l);l=Math.min((l-f)/e,1);a.innerHTML=Math.floor(l*(d-c)+c);1>l?window.requestAnimationFrame(m):"function"==typeof k&&k()}var f=null;window.requestAnimationFrame(m)}function lb(a){function c(){"undefined"!=typeof H&&null!=H&&Sa(H)}var d=document.querySelector(".score");if("number"!=typeof a)d.innerHTML="0",c();else{var e=parseInt(d.innerHTML,10);Bb(d,e,e+a,50>a?500:1E3,function(){c()})}}
function pb(a){var c=document.querySelector(".q-number"),d="^_^";c&&("number"==typeof a&&(d=a+" / "+ua),c.innerHTML=d)}
function kb(a,c){var d=document.querySelector(".dicLink");d&&("undefined"==typeof a||null==a?a="":("string"!=typeof a&&(a=a.join("")),"undefined"==typeof c||null==c?a='<a href="https://pedia.cloud.edu.tw/Entry/Detail?title='+encodeURIComponent(a)+'#" target="_blank">\u67e5\u770b\u6559\u80b2\u96f2-\u6559\u80b2\u767e\u79d1 ['+a+"] \u7684\u89e3\u91cb</a>":(a='\u67e5\u770b\u6559\u80b2\u96f2-\u6559\u80b2\u767e\u79d1\u7684\u89e3\u91cb &gt;&gt; [<a href="https://pedia.cloud.edu.tw/Entry/Detail?title='+(encodeURIComponent(a)+
'#" target="_blank">'+a+"</a>]"),a+='[<a href="https://pedia.cloud.edu.tw/Entry/Detail?title='+encodeURIComponent(c)+'#" target="_blank">'+c+"</a>]")),d.innerHTML=a)}
function Ab(a){var c=document.getElementById("HTML5FunWrapper");if("undefined"!=typeof c&&null!=c)if(a)window.scrollTo(0,0),window.onscroll=function(){window.scrollTo(0,0)},document.body.style.overflow="hidden",c.style.visibility="visible";else{c.style.visibility="hidden";window.onscroll=null;document.body.style.overflow="visible";try{"function"==typeof Cb&&Cb(1)}catch(d){}}}
function Db(){var a=document.querySelector("meta[name=viewport]");if("undefined"==typeof a||null==a)a=document.createElement("meta"),a.name="viewport",document.getElementsByTagName("head").item(0).appendChild(a);var c="initial-scale=1.0,minimum-scale=1,maximum-scale=1.0,user-scalable=no";/android/i.test(navigator.userAgent)&&(c+=",target-densityDpi=device-dpi");a.content=c}
function Eb(){for(var a=null,c=document.getElementsByTagName("meta"),d=0;d<c.length;d++)if("referrer"==c[d].name){a=c[d];break}null==a&&(a=document.createElement("meta"),a.name="referrer",document.getElementsByTagName("head")[0].appendChild(a));a.content="no-referrer"}
function Fb(){var a="PARTDLE";if("undefined"==typeof a||null==a)a="\u8f09\u5165\u6a94\u6848\u4e2d";var c=(window.innerWidth&&document.documentElement.clientWidth?Math.min(window.innerWidth,document.documentElement.clientWidth):window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth)/2,d=(window.innerHeight&&document.documentElement.clientHeight?Math.min(window.innerHeight,document.documentElement.clientHeight):window.innerHeight||document.documentElement.clientHeight||
document.getElementsByTagName("body")[0].clientHeight)/2+60,e=document.createElement("div");e.id="loadingLogo";e.setAttribute("class","loading-container");e.style.top=d+window.scrollY+"px";e.style.left=c+"px";e.innerHTML='<div class="loading-logo"><p class="loading-label">'+a+"</p></div>";document.body.appendChild(e);var k=10;T=!0;var m=setInterval(function(){e.style.top=d+window.scrollY+"px";e.style.left=c+"px";var f=document.querySelector(".loading-label");k=10!=k?10:-10;f.style.transform="translate(10px, -24px) rotate("+
k+"deg)";"boolean"!=typeof T||T||(clearInterval(m),e.remove())},100)}
function Oa(){if("undefined"!=typeof window.stroke_parts_data&&null!=window.stroke_parts_data){document.querySelector(".loading-label").innerHTML="\u8f09\u5165\u984c\u5eab";Va();var a=X("id"),c=X("gid"),d=X("col"),e="https://docs.google.com/spreadsheets/d/1kBueULlojPOH9E3EZYEUcUAv1HfJm_wULQT1hT2m1nM/edit?usp=sharing";""==a.replace(/\s/g,"")?""!=c&&(e=/gid=/.test(e)?e.replace(/gid=([^&\?#]+)/g,"gid="+c):e+((/\?/.test(e)?"&":"?")+"gid="+c+"#"+c)):e="https://docs.google.com/spreadsheets/d/"+a+"/edit?"+
(""==c?"usp=sharing":"?gid="+c+"#"+c);a=null;""!=d.replace(/\s|[^a-z]/ig,"")&&(a="SELECT "+d.toUpperCase());Ka(e,a,!1,!1,function(k){T=!1;Q=k.trim();var m=parseInt(X("lesson"),10);isNaN(m)||(k=Q.split(/\n\n+/),0<=m&&m<=k.length&&(Q=k[m-1]));ta=!0;rb()});xb()}else setTimeout(function(){T=!1;U("HTML5 FUN \u90e8\u4ef6\u8a2d\u5b9a\u8f09\u5165\u5931\u6557<br>\u8acb\u6aa2\u67e5\u5f8c\u518d\u8a66","red",5,function(){Ab(0)})},500)}
function Gb(){function a(){"undefined"!=typeof window.stroke_component&&null!=window.stroke_component?"undefined"==typeof window.stroke_parts_data||null==window.stroke_parts_data?Na():Oa():setTimeout(function(){U("CNS \u90e8\u4ef6\u8a2d\u5b9a\u8f09\u5165\u5931\u6557<br>\u8acb\u6aa2\u67e5\u5f8c\u518d\u8a66","red",5,function(){Ab(0)});T=!1},500)}document.querySelector(".loading-label").innerHTML="\u8f09\u5165\u8a2d\u5b9a";"undefined"==typeof window.stroke_component||null==window.stroke_component?Pa(a):
a()}function Cb(a){for(var c=3;10>=c;c++)try{document.querySelector("#aswift_"+c).parentElement.parentElement.style.scale=a}catch(d){}}function Hb(){try{"function"==typeof Cb&&Cb(.001)}catch(a){}Db();Eb();Ab(!0);window.scrollTo(0,0);document.querySelector(".debug").innerHTML="";T=!0;Fb();Ta();Ua("\u52a0\u6cb9");setTimeout(function(){lb();pb();kb()},100);Gb()}var Ib=X("autostart");"1"!=Ib&&"true"!=Ib||Hb();window.setVisibility=Ab;
window.btnSleep=function(a,c){a.disabled=!0;setTimeout(function(){a.disabled=!1},c)};window.newGame=rb;window.showAnswer=Xa;window.checkAnswer=hb;window.skipQuestion=function(){if(0<N.length){var a=S.join(""),c=ab(a);N.push({q:a,p:c,B:!0});a=["\u56de\u982d\u898b","\u5f85\u6703\u5152\u898b","See you later"];U("\uff5e"+a[Math.floor(Math.random()*a.length)]+"\uff5e","#00B0F0",.6);rb(!0)}else U("\u8acb\u52c7\u6562\u9762\u5c0d<br>\u9019\u662f\u6700\u5f8c\u4e00\u984c\u4e86","red")};
window.randomPosition=$a;
window.fileURL_onBlurHandler=function(a){var c="";a.value&&/^https:\/\//i.test(a.value)&&/spreadsheets/.test(a.value)&&(c=Ba(a.value));if(""==c)Aa(),a.value&&""==a.value.replace(/\s/g,"")?Aa():setTimeout(function(){U("\u8acb\u8f38\u5165 Google \u8a66\u7b97\u8868\u7684\u5171\u7528\u7db2\u5740")},100);else{try{document.querySelector("#previewBtn").style.display="none",document.querySelector("#submitBtn").style.display="block"}catch(d){}Ka(a.value,"SELECT * LIMIT 2",!0,!0,function(d){var e="";if("undefined"!=
typeof d&&null!=d&&"string"==typeof d.status&&"ok"==d.status){var k=d.table;if("undefined"!=typeof k.rows&&null!=k.rows&&0<k.rows.length){var m=document.createElement("table");if("undefined"!=typeof k.cols&&null!=k.cols){var f=m.insertRow();k.cols.forEach(function(l){f.insertCell().innerHTML="<b>"+l.id+"</b>"})}k.rows.forEach(function(l){var n=m.insertRow();l.c.forEach(function(p){n.insertCell().innerHTML=p?p.v:"&nbsp;"})});"undefined"!=typeof k.cols&&null!=k.cols&&(f=m.insertRow(),k.cols.forEach(function(){f.insertCell().innerHTML=
"...\u4ee5\u4e0b\u7701\u7565"}));k=document.querySelector(".preview");k.innerHTML="<h3>\u8acb\u9ede\u9078\u60f3\u8981\u4f7f\u7528\u7684\u6b04\u4f4d</h3>";k.appendChild(m);m.onclick=za;xa(0)}else e="\u5de5\u4f5c\u8868\u6c92\u6709\u8cc7\u6599<br>\u8acb\u78ba\u8a8d\u8a66\u7b97\u8868\u4e2d\u7684\u5167\u5bb9\u5f8c\u518d\u8a66"}else e="\u7121\u6cd5\u8f09\u5165\u984c\u5eab<br>\u8acb\u78ba\u8a8d\u8a66\u7b97\u8868\u4e2d\u7684\u5167\u5bb9\u5f8c\u518d\u8a66";""!=e&&(Aa(),setTimeout(function(){U(e,"red",10)},
100),console.log("debug",d))})}};window.submitOnClickHandler=ya;
window.copyAndSelectToClipboard=function(a){"string"==typeof a&&(a=document.getElementById(a));if("undefined"!=typeof a&&null!=a){if(/input|textarea/i.test(a.tagName))a.select(),document.execCommand("copy");else{var c=document.createElement("textarea");c.setAttribute("style","width:1;height:1;border:0;");c.textContent=a.textContent;document.body.append(c);c.select();document.execCommand("copy");c.remove();c=null;c=document.createRange();c.selectNode(a);window.getSelection().removeAllRanges();window.getSelection().addRange(c)}setTimeout(function(){window.getSelection().removeAllRanges()},
300)}};window.start=Hb;
